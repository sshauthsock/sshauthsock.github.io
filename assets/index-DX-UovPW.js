const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/spiritInfo-hAFo8mee.js","assets/utils-CHsLvtYz.js","assets/modalHandler-CAxpF0W0.js","assets/constants-lx1P6xCQ.js","assets/statFilter-C1yLqHyh.js","assets/bondCalculator-DzZrabRO.js","assets/resultModal-z94XDZDX.js","assets/spiritRanking-D8Ryw9Mh.js","assets/soulCalculator-DPZYfStz.js","assets/chakCalculator-CoLoJCjG.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();const M="modulepreload",B=function(e){return"/"+e},T={},y=function(t,o,a){let n=Promise.resolve();if(o&&o.length>0){let A=function(l){return Promise.all(l.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),r=s?.nonce||s?.getAttribute("nonce");n=A(o.map(l=>{if(l=B(l),l in T)return;T[l]=!0;const m=l.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const d=document.createElement("link");if(d.rel=m?"stylesheet":M,m||(d.as="script"),d.crossOrigin="",d.href=l,r&&d.setAttribute("nonce",r),document.head.appendChild(d),m)return new Promise((H,R)=>{d.addEventListener("load",H),d.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(s){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s}return n.then(s=>{for(const r of s||[])r.status==="rejected"&&i(r.reason);return t().catch(i)})},f="https://wind-app-backend-vr4cu5ozfq-du.a.run.app",w={};function D(e){if(e&&typeof e.image=="string"){const t=e.image.replace(/^images\//,"assets/img/");return{...e,image:t}}return e}function v(e){return Array.isArray(e)?e.map(D):e}async function h(e){if(!e.ok){const t=await e.json().catch(()=>({error:"서버 응답을 읽을 수 없습니다."}));throw console.error(`API Error ${e.status}:`,t.error||e.statusText,t),new Error(t.error||`서버 오류: ${e.statusText}`)}return e.json()}async function x(e,t,o=!1){const a=sessionStorage.getItem(e);if(a)try{return JSON.parse(a)}catch(r){console.error(`[Cache Error] Failed to parse sessionStorage data for ${e}, fetching fresh.`,r),sessionStorage.removeItem(e)}const n=await fetch(t),i=await h(n);let s=i;o&&Array.isArray(i)&&(s=v(i));try{sessionStorage.setItem(e,JSON.stringify(s))}catch(r){console.error(`[Cache Error] Failed to save to sessionStorage for ${e}:`,r)}return s}async function N(e,t){if(w[e])return w[e];const o=await fetch(t),a=await h(o);let n=JSON.parse(JSON.stringify(a));if(e.includes("/api/rankings")&&Array.isArray(n.rankings)){const i=e.includes("type=bond")?"bond":e.includes("type=stat")?"stat":null;i==="bond"?n.rankings=n.rankings.map(s=>{let r=s;return Array.isArray(r.spirits)&&(r.spirits=v(r.spirits)),r.bindStat!==void 0&&r.bindStats===void 0&&(r.bindStats=r.bindStat),r}):i==="stat"&&(n.rankings=v(n.rankings))}return w[e]=n,n}async function j(){return x("allSpiritsData",`${f}/api/alldata`,!0)}async function V(e){const t=await fetch(`${f}/api/calculate/bond`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({creatures:e})}),o=await h(t);return o&&Array.isArray(o.spirits)&&(o.spirits=v(o.spirits)),o}async function W(e,t,o=""){let a=`${f}/api/rankings?category=${encodeURIComponent(e)}&type=${encodeURIComponent(t)}`;return t==="stat"&&o&&(a+=`&statKey=${encodeURIComponent(o)}`),N(a,a)}async function G(){return x("soulExpTable",`${f}/api/soul/exp-table`)}async function K(e){const t=await fetch(`${f}/api/calculate/soul`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return h(t)}async function Z(){return x("chakData",`${f}/api/chak/data`)}async function Q(e){const t=await fetch(`${f}/api/calculate/chak`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return h(t)}const q={allSpirits:[]};function z(e){q.allSpirits=e}const C="loading-indicator-style";let c=null;function J(){if(document.getElementById(C))return;const e=document.createElement("style");e.id=C,e.textContent=`
        .loading-overlay {
            position: absolute; /* Changed from fixed to absolute for #app-container */
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            display: flex; justify-content: center; align-items: center;
            z-index: 10000; backdrop-filter: blur(4px);
            opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s;
        }
        .loading-overlay.visible { opacity: 1; visibility: visible; }
        .loading-container {
            background-color: #ffffff; border-radius: 15px; padding: 30px;
            text-align: center; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 400px; width: 90%;
        }
        .loading-spinner {
            border: 5px solid #e0e0e0; width: 60px; height: 60px;
            border-radius: 50%; border-top-color: #3498db;
            margin: 0 auto 20px; animation: spin 1.2s linear infinite;
        }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .loading-text { margin: 15px 0; color: #333; font-size: 20px; font-weight: bold; }
        .loading-subtext { color: #666; font-size: 14px; margin-bottom: 5px; }
    `,document.head.appendChild(e)}function $(e,t="처리 중...",o="잠시만 기다려주세요."){if(!e){console.warn("Loading indicator container not provided.");return}c&&(c.remove(),c=null),J(),c=document.createElement("div"),c.className="loading-overlay",c.innerHTML=`
        <div class="loading-container">
            <div class="loading-spinner"></div>
            <div class="loading-text">${t}</div>
            <div class="loading-subtext">${o}</div>
        </div>
    `,e.style.position="relative",e.appendChild(c),requestAnimationFrame(()=>{c?.classList.add("visible")})}function k(){c&&(c.classList.remove("visible"),c.remove(),c=null)}const U={spiritInfo:()=>y(()=>import("./spiritInfo-hAFo8mee.js"),__vite__mapDeps([0,1,2,3,4])),bondCalculator:()=>y(()=>import("./bondCalculator-DzZrabRO.js"),__vite__mapDeps([5,1,6,3,4])),spiritRanking:()=>y(()=>import("./spiritRanking-D8Ryw9Mh.js"),__vite__mapDeps([7,1,2,3,6])),soulCalculator:()=>y(()=>import("./soulCalculator-DPZYfStz.js"),__vite__mapDeps([8,1])),chakCalculator:()=>y(()=>import("./chakCalculator-CoLoJCjG.js"),__vite__mapDeps([9,1]))},p=document.getElementById("app-container"),_=document.getElementById("mainTabs");let S=null;const E=document.getElementById("helpBtn"),u=document.getElementById("helpTooltip"),I=document.getElementById("closeHelp"),L=document.getElementById("currentHelpTitle"),b=document.getElementById("pageSpecificHelpContent");E&&u&&I&&L&&b?(E.addEventListener("click",e=>{e.stopPropagation(),u.style.display=u.style.display==="block"?"none":"block",document.body.style.overflow=u.style.display==="block"?"hidden":"auto"}),I.addEventListener("click",e=>{e.stopPropagation(),u.style.display="none",document.body.style.overflow="auto"}),document.addEventListener("click",e=>{!E.contains(e.target)&&!u.contains(e.target)&&u.style.display==="block"&&(u.style.display="none",document.body.style.overflow="auto")})):console.error("Help button or related tooltip elements not found in DOM for initialization.");async function O(){const e=_.querySelector(".tab.active"),t=e?e.dataset.page:"spiritInfo",o=e?e.textContent:"환수 정보";if(S?.cleanup)try{S.cleanup()}catch{}p.innerHTML="",$(p,"페이지 로딩 중...","필요한 모듈을 불러오고 있습니다...");try{const a=U[t];if(!a)throw new Error(`'${t}' 페이지를 찾을 수 없습니다.`);const n=await a();if(S=n,n.init){if(await n.init(p),L&&b?(L.textContent=`${o} 도움말`,n.getHelpContentHTML?b.innerHTML=n.getHelpContentHTML():b.innerHTML='<div class="content-block"><p class="text-center text-light mt-md">이 페이지에 대한 특정 도움말은 없습니다.</p></div>'):console.error("Help tooltip specific content elements not found for update within route()."),typeof gtag=="function"){const i=`/bayeon-hwayeon/${t}`;document.title=`바연화연 | ${o}`,gtag("event","page_view",{page_title:o,page_path:i})}}else console.warn(`Page module '${t}' does not have an init() function.`),p.innerHTML='<p class="error-message">페이지를 초기화할 수 없습니다. (init 함수 없음)</p>'}catch(a){console.error(`[Router] Failed to load or initialize page '${t}':`,a),p.innerHTML=`<p class="error-message">페이지를 불러오는 중 오류가 발생했습니다: ${a.message}</p>`}finally{k()}}const P=document.querySelector(".footer-report-btn");P&&typeof gtag=="function"&&P.addEventListener("click",()=>{gtag("event","interaction",{event_category:"footer_action",event_label:"Report Button Click",event_action:"Click",link_url:"https://open.kakao.com/o/gZdiGDsh",page_location:window.location.href,page_title:document.title})});_.addEventListener("click",e=>{e.target.matches(".tab")&&!e.target.classList.contains("active")&&(_.querySelector(".tab.active")?.classList.remove("active"),e.target.classList.add("active"),O())});async function F(){$(p,"초기 데이터 로딩 중","서버에서 환수 정보를 불러오고 있습니다...");try{const t=(await j()).map(o=>{const a=o.image.replace(/^images\//,"assets/img/");return{...o,image:a}});z(t),await O()}catch(e){console.error("애플리케이션 초기화 실패:",e),p.innerHTML=`<p class="error-message">애플리케이션 초기화 실패: 데이터를 불러오는 데 실패했습니다. (${e.message})</p>`}finally{k()}}F();export{$ as a,G as b,V as c,K as d,Z as e,W as f,Q as g,k as h,q as s};
