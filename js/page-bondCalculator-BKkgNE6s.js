import{s as P,a as we,u as j,c as ke,h as $e}from"./main-Bgn-9pGL.js";import{c as I,i as k,e as y,S as J,F as Pe,P as F,a as De,b as Ne,r as Ae,d as Oe}from"./components-C2RsvHY9.js";import{L as D,a as Re,l as re,n as ce,E as de}from"./utils-x5ORUUhl.js";const fe="savedOptimalCombinations",ve="combinationCounter",qe=5;function X(){try{const n=localStorage.getItem(fe),t=n?JSON.parse(n):{ìˆ˜í˜¸:[],íƒ‘ìŠ¹:[],ë³€ì‹ :[]};return t.ìˆ˜í˜¸||(t.ìˆ˜í˜¸=[]),t.íƒ‘ìŠ¹||(t.íƒ‘ìŠ¹=[]),t.ë³€ì‹ ||(t.ë³€ì‹ =[]),t}catch(n){return console.error("Failed to load history from localStorage:",n),{ìˆ˜í˜¸:[],íƒ‘ìŠ¹:[],ë³€ì‹ :[]}}}function me(){try{const n=localStorage.getItem(ve),t=n?JSON.parse(n):{ìˆ˜í˜¸:0,íƒ‘ìŠ¹:0,ë³€ì‹ :0};return t.ìˆ˜í˜¸===void 0&&(t.ìˆ˜í˜¸=0),t.íƒ‘ìŠ¹===void 0&&(t.íƒ‘ìŠ¹=0),t.ë³€ì‹ ===void 0&&(t.ë³€ì‹ =0),t}catch(n){return console.error("Failed to load counter from localStorage:",n),{ìˆ˜í˜¸:0,íƒ‘ìŠ¹:0,ë³€ì‹ :0}}}function ge(n,t){try{localStorage.setItem(fe,JSON.stringify(n)),localStorage.setItem(ve,JSON.stringify(t))}catch(e){console.error("ê¸°ë¡ ì €ì¥ ì‹¤íŒ¨:",e),alert("ì¡°í•© ê¸°ë¡ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì €ì¥ ê³µê°„ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")}}function he(n){if(!n||!n.spirits||n.spirits.length===0||!n.spirits[0].type){console.warn("Invalid result data provided to addResult:",n);return}const t=n.spirits[0].type;if(!["ìˆ˜í˜¸","íƒ‘ìŠ¹","ë³€ì‹ "].includes(t)){console.warn(`Invalid category '${t}' for history storage.`);return}const e=X(),l=me();l[t]===void 0&&(l[t]=0);const i=new Date,a={...n,timestamp:i.toLocaleString("sv-SE"),id:i.getTime()};let c=-1;for(let o=0;o<qe;o++)if(!e[t][o]){c=o;break}c===-1&&(c=e[t].map((r,u)=>({entry:r,index:u})).filter(({entry:r})=>r!==null).reduce((r,u)=>!r||u.entry.id<r.entry.id?u:r,null)?.index||0),e[t][c]=a,l[t]++,ge(e,l)}function Fe(n,t){const e=X(),l=me();if(!e[n])return console.warn(`Attempted to remove from unknown category: ${n}`),!1;const i=e[n].findIndex(a=>a&&a.id===t);return i===-1?(console.warn(`Entry with id ${t} not found in category ${n}`),!1):(e[n][i]=null,ge(e,l),!0)}function be(n){const t=X();if(!t[n])return console.warn(`Attempted to retrieve history for unknown category: ${n}`),[];const e=t[n].filter(Boolean);return e.sort((l,i)=>i.id-l.id),e}let q=null,L=null,B=null,b=[],d={isPressed:!1,intervalId:null,timeoutId:null,hintElement:null,bridgeElement:null,hintHovered:!1,button:null,spiritName:null,action:null,mouseDownTime:null};const G={damageResistance:"stat-damage-resistance",damageResistancePenetration:"stat-damage-resistance-penetration",pvpDefensePercent:"stat-pvp-defense-percent",pvpDamagePercent:"stat-pvp-damage-percent"},_e=["damageResistance","damageResistancePenetration","pvpDamagePercent","pvpDefensePercent"];function Z(n,t){if(!n)return{spiritName:null,stats:[],totalScore:0};const e=P.allSpirits.find(o=>o.name===n);if(!e)return{spiritName:n,stats:[],totalScore:0};const i=e.stats.find(o=>o.level===t)?.registrationStat||{};let a=0;const c=[];return Object.entries(i).forEach(([o,r])=>{const u=y(r),m=J[o]||o;o==="damageResistance"||o==="damageResistancePenetration"?a+=u:(o==="pvpDamagePercent"||o==="pvpDefensePercent")&&(a+=u*10),u>0&&c.push({key:o,name:m,value:u,isScoreContributing:_e.includes(o)})}),{spiritName:n,stats:c,totalScore:Math.round(a)}}function Q(n){let t=0;const e={};return n.forEach(l=>{const i=P.allSpirits.find(a=>a.name===l.name&&a.type===l.type);if(i){const a=i.stats.find(c=>c.level===l.stats[0].level);a?.bindStat&&Object.entries(a.bindStat).forEach(([c,o])=>{const r=y(o);e[c]=(e[c]||0)+r,c==="damageResistance"||c==="damageResistancePenetration"?t+=r:(c==="pvpDamagePercent"||c==="pvpDefensePercent")&&(t+=r*10)})}}),{bindScore:t,bindStats:Object.entries(e).filter(([,l])=>l>0).map(([l,i])=>({key:l,name:J[l]||l,value:i}))}}function Y(n,t,e,l,i={}){const a=document.getElementById(n);if(!a)return;let c="";i.gradeCounts?c=Object.entries(i.gradeCounts).filter(([,g])=>g>=2).map(([g,f])=>`<span class="grade-tag grade-tag-${g==="ì „ì„¤"?"legend":"immortal"}">${g}x${f}</span>`).join(" "):i.factionCounts&&(c=Object.entries(i.factionCounts).filter(([,g])=>g>=2).map(([g,f])=>{const E=Pe[g]||"";return`<span class="faction-tag" title="${g}"><img src="${E}" class="faction-icon" alt="${g}" loading="lazy">x${f}</span>`}).join(" "));const o=Array.isArray(e)?e:[],r=["damageResistance","damageResistancePenetration","pvpDamagePercent","pvpDefensePercent"],u=[...o].sort((g,f)=>{const E=r.includes(g.key),C=r.includes(f.key);return E&&!C?-1:!E&&C?1:E&&C?r.indexOf(g.key)-r.indexOf(f.key):(g.name||g.key).localeCompare(f.name||f.key)});let m='<p class="no-effects">íš¨ê³¼ ì—†ìŒ</p>';u.length>0&&(m=`<ul class="effects-list">${u.map(g=>{const f=F.includes(g.key),E=Math.round(y(g.value)),C=f?`${E}%`:E.toLocaleString();return`<li class="${G[g.key]||""}"><span class="stat-name">${g.name}</span><span class="stat-value">${C}</span></li>`}).join("")}</ul>`),a.innerHTML=`
        <h4>${t} <span class="section-score">${Math.round(y(l))}</span></h4>
        ${c?`<div class="set-info">${c}</div>`:""}
        <div class="effects-content">${m}</div>
    `}function Ve(){U();const n=I("div","modal-overlay",{id:"optimalModal"}),t=I("div","modal-content",{id:"optimalModalContent"}),e=I("button","modal-close",{id:"closeOptimalModal",text:"âœ•"});t.appendChild(e),n.appendChild(t),document.body.appendChild(n),e.onclick=U,n.addEventListener("click",i=>{i.target===n&&U()});const l=i=>{i.key==="Escape"&&U()};return document.addEventListener("keydown",l),n._escListener=l,q=n,{modal:n,content:t}}function Se(){const n=document.getElementById("registrationEffectSection");if(!n)return;if(!L){n.style.display="none";return}const t=b.find(c=>c.name===L),e=t?t.stats[0].level:25,l=Z(L,e);if(l.stats.length===0){n.innerHTML=`
      <h4>ë“±ë¡ íš¨ê³¼ <span class="section-score">0</span></h4>
      <div class="set-info">
        <span class="registration-spirit-tag">ì‚¬ìš©ì¤‘: ${L}</span>
      </div>
      <div class="effects-content">
        <p class="no-effects">ë“±ë¡ íš¨ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
      </div>
    `,n.style.display="block";return}const a=`<ul class="effects-list">${l.stats.map(c=>{const o=F.includes(c.key),r=Math.round(y(c.value)),u=o?`${r}%`:r.toLocaleString();return`<li class="${G[c.key]||""}"><span class="stat-name">${c.name}</span><span class="stat-value">${u}</span></li>`}).join("")}</ul>`;n.innerHTML=`
    <h4>ë“±ë¡ íš¨ê³¼ <span class="section-score">${l.totalScore}</span></h4>
    <div class="set-info">
      <span class="registration-spirit-tag">ì‚¬ìš©ì¤‘: ${L}</span>
    </div>
    <div class="effects-content">
      ${a}
    </div>
  `,n.style.display="block"}function ye(){const n=document.getElementById("hiddenRegistrationStats"),t=document.querySelector(".more-stats-button");if(n&&t)if(n.style.display==="none"){n.style.display="block";const e=n.querySelectorAll("li").length;t.textContent=`${e}ê°œ ìˆ¨ê¸°ê¸°`}else{n.style.display="none";const e=n.querySelectorAll("li").length;t.textContent=`+${e}ê°œ ë” ë³´ê¸°`}}function N(){if(!B)return;b.forEach((f,E)=>{});const n=Q(b),t=y(B.gradeScore),e=y(B.factionScore),l=Math.round(t+e+n.bindScore),i=b.find(f=>f.name===L),a=i?i.stats[0].level:25,o=Z(L,a).totalScore,r=l+o;o>0?`${r.toLocaleString()}${l.toLocaleString()}`:`${l.toLocaleString()}`;let u,m;o>0?(u=`ì¡°í•© í•©ì‚°: ${r.toLocaleString()} (${l.toLocaleString()})`,m="í•©ì‚° = ë“±ë¡ íš¨ê³¼ + ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)"):(u=`ì¡°í•© í•©ì‚°: ${l.toLocaleString()}`,m="í•©ì‚° = ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)");const g=document.getElementById("optimalHeader");if(g){const f=g.querySelector(".modal-main-title");f&&(f.innerHTML=`
        ${u}
        <span class="score-formula">${m}</span>
      `)}Y("optimalBindEffects","ê²°ì† íš¨ê³¼",n.bindStats,n.bindScore),Se(),Ee(b,B.gradeEffects||[],B.factionEffects||[]),window.toggleMoreStats=ye}function We(){if(!B||!b||b.length===0){alert("ì €ì¥í•  ì¡°í•© ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const n=Q(b),t=y(B.gradeScore),e=y(B.factionScore),l=b.find(u=>u.name===L),i=l?l.stats[0].level:25,c=Z(L,i).totalScore,o=Math.round(t+e+n.bindScore+c),r={...B,spirits:b.map(u=>({...u,stats:[{level:u.stats[0].level}]})),bindScore:n.bindScore,bindStats:n.bindStats,gradeScore:t,factionScore:e,scoreWithBind:Math.round(t+e+n.bindScore),registrationScore:c,totalScoreWithRegistration:o,selectedUsedSpirit:L,combination:b.map(u=>u.name),timestamp:new Date().toLocaleString("sv-SE"),id:Date.now()};he(r),alert("ì¡°í•©ì´ ê¸°ë¡ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!"),setTimeout(()=>{b[0]?.type&&te(b[0].type)},100)}function Ue(n,t,e){if(e.stopPropagation(),confirm("ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))if(Fe(n,t)){const i=be(n);if(B&&B.id===t)if(i.length>0){const a=i[0];L=a.selectedUsedSpirit||null,B=JSON.parse(JSON.stringify(a)),b=JSON.parse(JSON.stringify(a.spirits)),ee(a,!1)}else{L=null,B=null,b=[];const a=document.getElementById("optimalHeader");a&&(a.innerHTML=`
              <div class="optimal-header-left">
                <h3 class="modal-main-title">ì¡°í•© í•©ì‚°: ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
              </div>
              <div class="optimal-header-right">
                <button class="header-save-button" onclick="saveCombination()">ì¡°í•© ì €ì¥</button>
              </div>
            `);const c=document.getElementById("combinationResultsContainer");c&&(c.innerHTML='<p class="no-data-message">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>')}te(n)}else alert("ê¸°ë¡ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}function Le(n){const t=n.target;if(!t.classList.contains("level-btn"))return;const e=t.dataset.action;if(e!=="level-down"&&e!=="level-up")return;n.preventDefault(),n.stopPropagation();const l=t.dataset.spirit;l&&(d.timeoutId&&clearTimeout(d.timeoutId),d.intervalId&&clearInterval(d.intervalId),d.isPressed=!1,d.button=t,d.spiritName=l,d.action=e,d.hintHovered=!1,d.mouseDownTime=Date.now(),d.timeoutId=setTimeout(()=>{d.button===t&&je()},300))}function Ye(n){n.touches[0],Le({target:n.target,preventDefault:()=>n.preventDefault(),stopPropagation:()=>n.stopPropagation()})}function ze(n){const t=n.changedTouches[0],e={target:document.elementFromPoint(t.clientX,t.clientY),clientX:t.clientX,clientY:t.clientY,type:"touchend"};K(e)}function je(){if(!d.button)return;d.isPressed=!0;try{Je()}catch(t){D.error("createModalHint ì—ëŸ¬:",t)}const n=()=>{if(!d.isPressed)return!1;const t=b.findIndex(i=>i.name===d.spiritName);if(t===-1||k(d.spiritName))return!1;const e=b[t];e.stats[0].level;let l=!1;if(d.action==="level-down"&&e.stats[0].level>0?(e.stats[0].level=Math.max(0,e.stats[0].level-1),l=!0):d.action==="level-up"&&e.stats[0].level<25&&(e.stats[0].level=Math.min(25,e.stats[0].level+1),l=!0),l){const i=d.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");i&&(i.textContent=`Lv.${e.stats[0].level}`);const a=d.button.closest(".spirit-info-item-with-level").querySelector(".level-input");return a&&(a.value=e.stats[0].level),N(),!0}return!1};n(),d.intervalId=setInterval(()=>{n()||z()},200)}function z(){d.intervalId&&(clearInterval(d.intervalId),d.intervalId=null),d.timeoutId&&(clearTimeout(d.timeoutId),d.timeoutId=null),Xe(),d.isPressed=!1,d.hintHovered=!1,d.bridgeElement=null,d.button=null,d.spiritName=null,d.action=null,d.mouseDownTime=null}function Je(){if(!d.button)return;const t=(d.action==="level-down"?0:25).toString(),e=document.createElement("div");e.className="level-hint",e.textContent=t;const l=d.button.getBoundingClientRect();e.style.position="fixed",e.style.top=l.top+"px",e.style.zIndex="2100",e.style.color="white",e.style.padding="0px 4px",e.style.margin="0",e.style.border="none",e.style.borderRadius="3px",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.pointerEvents="auto",e.style.cursor="pointer",e.style.whiteSpace="nowrap",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)",e.style.textAlign="center",e.style.height=l.height+"px",e.style.width="30px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.transition="all 0.2s ease",d.action==="level-down"?(e.style.left=l.left-30+"px",e.style.backgroundColor="#f44336"):(e.style.left=l.right+"px",e.style.backgroundColor="#4CAF50"),e.style.lineHeight=l.height+"px",document.body.appendChild(e),d.hintElement=e,d.hintHovered=!1;const i=document.createElement("div");i.className="hint-bridge",i.style.position="fixed",i.style.top=l.top+"px",i.style.height=l.height+"px",i.style.zIndex="2099",i.style.backgroundColor="transparent",i.style.pointerEvents="auto",d.action==="level-down"?(i.style.left=l.left-35+"px",i.style.width=35+l.width+"px"):(i.style.left=l.left+"px",i.style.width=l.width+35+"px"),document.body.appendChild(i),d.bridgeElement=i;const a=()=>{d.isPressed&&(d.hintHovered=!0,e.style.transform="scale(1.2)",e.style.fontSize="12px",e.style.fontWeight="900",e.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)")},c=()=>{d.isPressed&&(d.hintHovered=!1,e.style.transform="scale(1)",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)")},o=()=>{if(d.isPressed&&d.hintHovered){const r=d.action==="level-down"?0:25,u=b.findIndex(m=>m.name===d.spiritName);if(u!==-1){b[u].stats[0].level=r;const m=d.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");m&&(m.textContent=`Lv.${r}`);const g=d.button.closest(".spirit-info-item-with-level").querySelector(".level-input");g&&(g.value=r),N()}z()}};e.addEventListener("mouseenter",a),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",c),e.addEventListener("touchstart",r=>{r.preventDefault(),a()},{passive:!1}),e.addEventListener("touchend",r=>{r.preventDefault(),o()},{passive:!1}),i.addEventListener("touchstart",r=>{r.preventDefault(),a()},{passive:!1}),i.addEventListener("touchend",r=>{r.preventDefault()},{passive:!1})}function Xe(){d.hintElement&&(document.body.removeChild(d.hintElement),d.hintElement=null),d.bridgeElement&&(document.body.removeChild(d.bridgeElement),d.bridgeElement=null)}function K(n){if(d.timeoutId&&!d.isPressed){clearTimeout(d.timeoutId);const t=b.findIndex(e=>e.name===d.spiritName);if(t!==-1){const e=b[t];e.stats[0].level,d.action==="level-down"&&e.stats[0].level>0?e.stats[0].level=Math.max(0,e.stats[0].level-1):d.action==="level-up"&&e.stats[0].level<25&&(e.stats[0].level=Math.min(25,e.stats[0].level+1));const l=d.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");l&&(l.textContent=`Lv.${e.stats[0].level}`);const i=d.button.closest(".spirit-info-item-with-level").querySelector(".level-input");i&&(i.value=e.stats[0].level),N()}d.timeoutId=null,d.button=null,d.spiritName=null,d.action=null,d.mouseDownTime=null;return}if(d.isPressed){if(n.type==="touchend"&&d.hintElement){const t=d.hintElement.getBoundingClientRect();n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom&&(d.hintHovered=!0)}if(d.hintHovered){const t=d.action==="level-down"?0:25,e=b.findIndex(l=>l.name===d.spiritName);if(e!==-1){b[e].stats[0].level=t;const l=d.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");l&&(l.textContent=`Lv.${t}`);const i=d.button.closest(".spirit-info-item-with-level").querySelector(".level-input");i&&(i.value=t),N()}}z()}}function ue(n,t){const e=n.target;if(e.classList.contains("level-btn"))return;if(e.classList.contains("level-input")){const i=e.dataset.spirit;let a=parseInt(e.value,10);(isNaN(a)||a<0)&&(a=0),a>25&&(a=25);const c=b.findIndex(o=>o.name===i);if(c!==-1){b[c].stats[0].level=a;const o=e.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");o&&(o.textContent=`Lv.${a}`),e.value=a,N()}return}const l=e.closest(".spirit-info-item-with-level");if(l&&!e.closest(".spirit-level-control")){const i=l.dataset.spiritName;L===i?L=null:L=i,document.querySelectorAll(".spirit-info-item-with-level").forEach(a=>{a.classList.remove("selected-used-spirit")}),L&&l.classList.add("selected-used-spirit"),N()}}function Ge(n,t=!1){if(!n||!Array.isArray(n.combination)||n.combination.length===0){alert("ê³„ì‚° ê²°ê³¼ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");return}const{modal:e,content:l}=Ve();e.style.display="flex",document.body.style.overflow="hidden",L=n.selectedUsedSpirit||null,B=JSON.parse(JSON.stringify(n)),b=JSON.parse(JSON.stringify(n.spirits)),Ze(n,l,t),setTimeout(()=>{try{window.adfit&&typeof window.adfit.render=="function"?document.querySelectorAll("#optimalModalContent .kakao_ad_area").forEach(a=>{window.adfit.render(a)}):D.warn("Kakao AdFit script (window.adfit) not yet loaded or not available.")}catch(i){D.error("Kakao AdFit: Error rendering ads in modal:",i)}},100)}function Ze(n,t,e){const l=I("div","optimal-header",{id:"optimalHeader"}),i=I("div","combination-results-container",{id:"combinationResultsContainer"}),a=b.map(m=>`
      <div class="spirit-info-item-with-level ${L===m.name?"selected-used-spirit":""}" data-spirit-name="${m.name}">
          <div class="spirit-image-container">
              <img src="${m.image}" alt="${m.name}" loading="lazy">
          </div>
          <div class="spirit-info-details">
              <div class="spirit-info-name">${m.name}</div>
              <div class="spirit-info-level">Lv.${m.stats[0].level}</div>
          </div>
          ${e?"":k(m.name)?`<div class="spirit-level-control">
                    <div class="fixed-level-control">
                      <span class="fixed-level-label">25 (ê³ ì •)</span>
                    </div>
                  </div>`:`<div class="spirit-level-control">
                    <button class="level-btn minus-btn" data-action="level-down" data-spirit="${m.name}">-</button>
                    <input type="number" class="level-input" min="0" max="25" value="${m.stats[0].level}" data-spirit="${m.name}">
                    <button class="level-btn plus-btn" data-action="level-up" data-spirit="${m.name}">+</button>
                  </div>`}
      </div>`).join("");i.innerHTML=`<div class="spirits-grid-container">${a}</div>`;const c=I("div","results-container");c.innerHTML=`
        <div class="results-section" id="registrationEffectSection" style="display: none;"></div>
        <div class="results-section" id="optimalGradeEffects"></div>
        <div class="results-section" id="optimalFactionEffects"></div>
        <div class="results-section" id="optimalBindEffects"></div>
    `;const o=I("div","spirit-details-container",{id:"optimalSpiritsDetails"}),r=I("div","kakao-ad-modal-container desktop-modal-ad",{});r.innerHTML=`
      <ins class="kakao_ad_area"
          data-ad-unit="DAN-avif2d68afxV6xpn"
          data-ad-width="728"
          data-ad-height="90"></ins>
  `,t.appendChild(r);const u=I("div","kakao-ad-modal-container mobile-modal-ad",{});if(u.innerHTML=`
      <ins class="kakao_ad_area"
          data-ad-unit="DAN-wnVEYOHZjycPISXg"
          data-ad-width="320"
          data-ad-height="50"></ins>
  `,t.appendChild(u),t.append(l),!e){const m=I("div","history-tabs-container",{id:"historyContainer"});t.appendChild(m)}t.append(i,c,o),Re(t),setTimeout(()=>{ee(n,e),e||n.spirits&&n.spirits.length>0&&n.spirits[0].type&&te(n.spirits[0].type)},10)}function ee(n,t){const{gradeScore:e,factionScore:l,gradeEffects:i,factionEffects:a}=n,c=Q(b),o=c.bindScore,r=c.bindStats,u=n.registrationScore||0,m=n.totalScoreWithRegistration||Math.round(y(e)+y(l)+y(o));u>0?`${m.toLocaleString()}${(m-u).toLocaleString()}`:`${m.toLocaleString()}`;let g,f;u>0?(g=`ì¡°í•© í•©ì‚°: ${m.toLocaleString()} (${(m-u).toLocaleString()})`,f="í•©ì‚° = ë“±ë¡ íš¨ê³¼ + ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)"):(g=`ì¡°í•© í•©ì‚°: ${m.toLocaleString()}`,f="í•©ì‚° = ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)"),document.getElementById("optimalHeader").innerHTML=`
        <div class="optimal-header-left">
          <h3 class="modal-main-title">
            ${g}
            <span class="score-formula">${f}</span>
          </h3>
        </div>
        <div class="optimal-header-right">
          ${t?"":'<button id="saveCombinationBtn" class="header-save-button">ì¡°í•© ì €ì¥</button>'}
        </div>
    `;const E=b.map(S=>`
      <div class="spirit-info-item-with-level ${L===S.name?"selected-used-spirit":""}" data-spirit-name="${S.name}">
          <div class="spirit-image-container">
              <img src="${S.image}" alt="${S.name}" loading="lazy">
          </div>
          <div class="spirit-info-details">
              <div class="spirit-info-name">${S.name}</div>
              <div class="spirit-info-level">Lv.${S.stats[0].level}</div>
          </div>
          ${t?"":k(S.name)?`<div class="spirit-level-control">
                    <div class="fixed-level-control">
                      <span class="fixed-level-label">25 (ê³ ì •)</span>
                    </div>
                  </div>`:`<div class="spirit-level-control">
                    <button class="level-btn minus-btn" data-action="level-down" data-spirit="${S.name}">-</button>
                    <input type="number" class="level-input" min="0" max="25" value="${S.stats[0].level}" data-spirit="${S.name}">
                    <button class="level-btn plus-btn" data-action="level-up" data-spirit="${S.name}">+</button>
                  </div>`}
      </div>`).join(""),C=document.getElementById("combinationResultsContainer");C.innerHTML=`<div class="spirits-grid-container">${E}</div>`;const x=C.querySelector(".spirits-grid-container");t||(x.addEventListener("click",S=>ue(S)),x.addEventListener("input",S=>ue(S)),x.addEventListener("mousedown",Le),x.addEventListener("touchstart",Ye,{passive:!1}),document.addEventListener("mouseup",K),document.addEventListener("touchend",ze));const T=document.getElementById("saveCombinationBtn");T&&!t&&(T.onclick=We),Y("optimalGradeEffects","ë“±ê¸‰ íš¨ê³¼",i||[],e,{gradeCounts:b.reduce((S,w)=>(w.grade&&(S[w.grade]=(S[w.grade]||0)+1),S),{})}),Y("optimalFactionEffects","ì„¸ë ¥ íš¨ê³¼",a||[],l,{factionCounts:b.reduce((S,w)=>(w.influence&&(S[w.influence]=(S[w.influence]||0)+1),S),{})}),Y("optimalBindEffects","ê²°ì† íš¨ê³¼",r,o),Se(),Ee(b,i||[],a||[]),window.toggleMoreStats=ye}function te(n){const t=be(n),e=document.getElementById("historyContainer");if(!e)return;if(t.length===0){e.innerHTML=`<p class="no-history-message">${n} ì¹´í…Œê³ ë¦¬ì— ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;return}let l=-1,i=null;const a=t.length>0?t[0].id:null;t.forEach(o=>{const r=o.totalScoreWithRegistration||Math.round(y(o.gradeScore)+y(o.factionScore)+y(o.bindScore));r>l&&(l=r,i=o.id)});const c=Array(5).fill(null).map((o,r)=>{const u=t[r];if(!u)return'<div class="history-tab-placeholder"></div>';const m=u.totalScoreWithRegistration||Math.round(y(u.gradeScore)+y(u.factionScore)+y(u.bindScore)),g=Math.round(y(u.gradeScore)+y(u.factionScore)+y(u.bindScore)),f=u.id===a,E=u.id===i,C=u.registrationScore>0?`${m.toLocaleString()}
(${g.toLocaleString()})`:m.toLocaleString();return`<div class="history-tab ${E?"best":""} ${f?"newest active":""}" data-history-id="${u.id}">
            <div class="history-delete-btn" data-category="${n}" data-id="${u.id}" title="ê¸°ë¡ ì‚­ì œ">Ã—</div>
            <div class="tab-indicators">
                ${f?'<span class="current-marker">New</span>':""}
                ${E?'<span class="best-marker">Best</span>':""}
            </div>
            <div class="tab-main-info">
                <span class="tab-score">${C}</span>
                <span class="tab-timestamp">${u.timestamp.substring(5,16)}</span>
            </div>
        </div>`}).join("");e.innerHTML=`<div class="history-tabs">${c}</div>`,e.querySelectorAll(".history-tab").forEach(o=>{o.addEventListener("click",r=>{if(r.target.classList.contains("history-delete-btn")){const g=r.target.dataset.category,f=parseInt(r.target.dataset.id,10);Ue(g,f,r);return}e.querySelectorAll(".history-tab").forEach(g=>g.classList.remove("active")),o.classList.add("active");const u=parseInt(o.dataset.historyId,10),m=t.find(g=>g.id===u);m&&(L=m.selectedUsedSpirit||null,B=JSON.parse(JSON.stringify(m)),b=JSON.parse(JSON.stringify(m.spirits)),ee(m,!1))})})}function Ee(n,t=[],e=[]){n.forEach((f,E)=>{});const l=document.getElementById("optimalSpiritsDetails");if(!l)return;const i=new Set;if(n.forEach(f=>{const E=P.allSpirits.find(T=>T.name===f.name&&T.type===f.type);if(!E)return;const C=f.stats[0].level,x=E.stats.find(T=>T.level===C);x?.bindStat&&Object.keys(x.bindStat).forEach(T=>i.add(T))}),t.forEach(f=>{f.key&&i.add(f.key)}),e.forEach(f=>{f.key&&i.add(f.key)}),i.size===0){l.innerHTML="<h4>ìƒì„¸ ìŠ¤íƒ¯ ë¹„êµ</h4><p>ì„ íƒëœ í™˜ìˆ˜ì˜ ì¥ì°© íš¨ê³¼ ìŠ¤íƒ¯ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";return}const a=["damageResistance","damageResistancePenetration","pvpDamagePercent","pvpDefensePercent"],c=[...i],o=c.filter(f=>a.includes(f)),r=c.filter(f=>!a.includes(f)).sort(),m=[...a.filter(f=>o.includes(f)),...r];let g=`
        <h4>ìƒì„¸ ìŠ¤íƒ¯ ë¹„êµ</h4>
        <div class="table-wrapper">
            <table class="spirits-stats-table">
                <thead>
                    <tr>
                        <th>ëŠ¥ë ¥ì¹˜</th>
                        ${n.map(f=>`<th><img src="${f.image}" class="spirit-thumbnail" alt="${f.name}" title="${f.name}" loading="lazy"><br><span class="spirit-table-name">${f.name}</span></th>`).join("")}
                        <th class="stat-total-header">ê²°ì† í•©ì‚°</th>
                        <th class="stat-total-header">ì´ í•©ì‚°</th>
                    </tr>
                </thead>
                <tbody>
    `;m.forEach(f=>{const E=G[f]||"";let C=0,x=0,T=0,S="";const w=[];n.forEach($=>{const Ie=P.allSpirits.find(W=>W.name===$.name&&W.type===$.type),oe=$.stats[0].level,Te=Ie?.stats.find(W=>W.level===oe),R=y(Te?.bindStat?.[f]||0);C+=R,w.push({name:$.name,level:oe,value:R});const xe=F.includes(f)?`${Math.round(R)}%`:Math.round(R).toLocaleString();S+=`<td>${R>0?xe:"-"}</td>`});const se=t.find($=>$.key===f);se&&(x=y(se.value||0));const ae=e.find($=>$.key===f);ae&&(T=y(ae.value||0));const O=C+x+T;let _;f==="pvpDamagePercent"||f==="pvpDefensePercent"?_=C>0?`${Math.round(C*10).toLocaleString()}`:"-":F.includes(f)?_=`${Math.round(C)}%`:_=Math.round(C).toLocaleString();let V;f==="pvpDamagePercent"||f==="pvpDefensePercent"?V=O>0?`${Math.round(O*10).toLocaleString()}`:"-":F.includes(f)?V=`${Math.round(O)}%`:V=Math.round(O).toLocaleString(),g+=`
        <tr class="${E}">
            <th>${J[f]||f}</th>
            ${S}
            <td class="stat-total stat-bind-total">${C>0?_:"-"}</td>
            <td class="stat-total stat-total-sum">${O>0?V:"-"}</td>
        </tr>`}),g+="</tbody></table></div>",l.innerHTML=g}function U(){z(),document.removeEventListener("mouseup",K),q&&(document.removeEventListener("keydown",q._escListener),q.remove(),q=null),L=null,B=null,b=[],delete window.toggleMoreStats,document.body.style.overflow="auto"}let s={isPressed:!1,intervalId:null,timeoutId:null,hintElement:null,bridgeElement:null,hintHovered:!1,button:null,spiritName:null,action:null,mouseDownTime:null,touchStartTime:null,touchMoveHandler:null,ignoreMouseUp:!1};const v={currentCategory:"ìˆ˜í˜¸",selectedSpirits:new Map,groupByInfluence:!1,currentStatFilter:""},h={},p={};function Qe(){return`
    <div class="sub-tabs" id="bondCategoryTabs">
        <div class="tab active" data-category="ìˆ˜í˜¸">ìˆ˜í˜¸</div>
        <div class="tab" data-category="íƒ‘ìŠ¹">íƒ‘ìŠ¹</div>
        <div class="tab" data-category="ë³€ì‹ ">ë³€ì‹ </div>
    </div>

    <div class="view-toggle-container">
        <label class="toggle-switch">
            <input type="checkbox" id="influenceToggle">
            <span class="slider round"></span>
        </label>
        <span class="toggle-label">ì„¸ë ¥ë³„ ë³´ê¸°</span>
        <div class="stat-filter-container"></div>
        <a href="https://open.kakao.com/o/sUSXtUYe" target="_blank" class="kakao-gift-btn">
            <img src="assets/img/gift.png" alt="ì¹´ì¹´ì˜¤ ì„ ë¬¼í•˜ê¸° ì•„ì´ì½˜" loading="lazy"
                style="height: 20px; vertical-align: middle; margin-right: 5px;">
            ê°œë°œìì—ê²Œ ì¹´í†¡ ì„ ë¬¼í•˜ê¸°
        </a>
    </div>
    <div class="bond-container">
        <div class="main-content">
            <div class="left-panel">
                <div class="section-header">
                    <h2 class="section-title">ì „ì²´ í™˜ìˆ˜ ëª©ë¡</h2>
                    <div class="selection-controls">
                        <button id="selectAllBtn" class="btn btn-sm btn-primary">ì „ì²´ì„ íƒ</button>
                        <button id="clearAllSelectionBtn" class="btn btn-sm btn-danger">ì „ì²´í•´ì œ</button>
                    </div>
                </div>
                <div id="spiritListContainer" class="spirit-selection"></div>
            </div>
            <div class="right-panel">
                <div class="selected-spirits-container">
                    <div class="selected-spirits-header">
                        <h3 class="selection-title">ì„ íƒëœ í™˜ìˆ˜ (<span id="selectedCount">0</span>)</h3>
                    </div>
                    <div id="selectedSpiritsList" class="selected-spirits"></div>
                    <div class="header-controls">
                        <div class="level-batch-control">
                            <label>ì¼ê´„ ë ˆë²¨:</label>
                            <input type="number" id="batchLevelInput" min="0" max="25" value="0">
                            <button id="applyBatchLevelBtn" class="btn btn-sm btn-primary">ì ìš©</button>
                        </div>
                        <div class="calculate-btn-small">
                            <button id="findOptimalBtn" class="btn btn-warning">ìµœì  ì¡°í•© ì°¾ê¸°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>`}function H(){ne(),Ke(),M()}function ne(){let n=ie();v.currentStatFilter&&(n=n.filter(t=>Ne(t,v.currentStatFilter))),Ae({container:h.spiritListContainer,spirits:n,onSpiritClick:ot,getSpiritState:t=>{const{hasFullRegistration:e,hasFullBind:l,hasLevel25Bind:i}=Oe(t);return{selected:v.selectedSpirits.has(t.name),registrationCompleted:e,bondCompleted:l,level25BindAvailable:i}},groupByInfluence:v.groupByInfluence})}function ie(){const n=l=>l?parseInt(l.match(/\d+/)?.[0]||"999",10):999,e=(Array.isArray(P.allSpirits)?P.allSpirits:[]).filter(l=>l.type===v.currentCategory);return e.sort((l,i)=>{const a={ì „ì„¤:1,ë¶ˆë©¸:2},c=a[l.grade]||99,o=a[i.grade]||99;return c!==o?c-o:n(l.image)-n(i.image)}),e}function Ke(){const n=h.selectedSpiritsList;n.innerHTML="";const t=[...v.selectedSpirits.values()].filter(i=>i.type===v.currentCategory);h.selectedCount.textContent=t.length;const e=document.getElementById("mobileSelectedCount");e&&(e.textContent=t.length);const l=document.getElementById("selectedSpiritsMobile");if(l&&(l.innerHTML=""),t.length===0){n.innerHTML="<p class='text-center text-sm text-light mt-lg'>ì„ íƒëœ í™˜ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>",l&&(l.innerHTML="<p class='text-center text-sm text-light mt-lg'>ì„ íƒëœ í™˜ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>");return}t.forEach(i=>{const a=I("div","selected-spirit-card");a.dataset.spiritName=i.name,a.innerHTML=`
        <button class="remove-spirit" data-action="remove" title="ì„ íƒ í•´ì œ">Ã—</button>
        <div class="selected-spirit-header">
            <img src="${i.image}" alt="${i.name}" loading="lazy">
            <div class="spirit-info">
                <div class="spirit-name">${i.name}</div>
            </div>
        </div>
        <div class="spirit-level-control">
            ${k(i.name)?`<div class="fixed-level-control">
                <span class="fixed-level-label">25 (ê³ ì •)</span>
              </div>`:`<button class="level-btn minus-btn" data-action="level-down">-</button>
              <input type="number" class="level-input" min="0" max="25" value="${i.level}">
              <button class="level-btn plus-btn" data-action="level-up">+</button>`}
        </div>
        `,n.appendChild(a);const c=a.querySelector(".remove-spirit");if(c&&(c.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),v.selectedSpirits.has(i.name)&&(v.selectedSpirits.delete(i.name),M(),H())}),c.addEventListener("touchend",o=>{o.preventDefault(),o.stopPropagation(),v.selectedSpirits.has(i.name)&&(v.selectedSpirits.delete(i.name),M(),H())})),l){const o=I("div","selected-spirit-card");o.dataset.spiritName=i.name,o.innerHTML=a.innerHTML,l.appendChild(o);const r=o.querySelector(".remove-spirit");r&&(r.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),v.selectedSpirits.has(i.name)&&(v.selectedSpirits.delete(i.name),M(),H())}),r.addEventListener("touchend",u=>{u.preventDefault(),u.stopPropagation(),v.selectedSpirits.has(i.name)&&(v.selectedSpirits.delete(i.name),M(),H())}))}})}function M(){localStorage.setItem("bondCalculatorState",JSON.stringify({category:v.currentCategory,spirits:[...v.selectedSpirits.values()],groupByInfluence:v.groupByInfluence,currentStatFilter:v.currentStatFilter}))}function et(){const n=localStorage.getItem("bondCalculatorState");if(n)try{const t=JSON.parse(n);v.currentCategory=t.category||"ìˆ˜í˜¸",v.selectedSpirits=new Map((t.spirits||[]).map(e=>[e.name,e])),v.groupByInfluence=t.groupByInfluence||!1,v.currentStatFilter=t.currentStatFilter||""}catch(t){D.error("Error loading state from storage, resetting:",t),v.selectedSpirits=new Map,v.groupByInfluence=!1,v.currentStatFilter=""}}function tt(){const n=h.container.querySelector(".stat-filter-container"),t=Array.isArray(P.allSpirits)?P.allSpirits:[];De(n,t,i=>{v.currentStatFilter=i,ne()});const e=h.container.querySelector("#statFilter"),l=h.container.querySelector(".clear-filter-btn");e&&(e.value=v.currentStatFilter),l&&(l.style.display=v.currentStatFilter?"inline-flex":"none")}function nt(){const n=document.getElementById("panelToggleContainer"),t=n?n.querySelector(".right-panel"):null;t&&(t.classList.toggle("collapsed"),n.querySelector(".toggle-icon").textContent=t.classList.contains("collapsed")?"â–²":"â–¼")}function it(){le("mobileBatchLevel")}function lt(){Lt("mobileBatchLevel")}function st(){Be()}function at(){p.containerClickHandler=rt,h.container.addEventListener("click",p.containerClickHandler),p.containerMouseDownHandler=Ce,p.globalMouseUpHandler=He,p.containerTouchStartHandler=ct,p.containerTouchEndHandler=dt,p.globalTouchEndHandler=pt,h.container.addEventListener("mousedown",p.containerMouseDownHandler),h.container.addEventListener("touchstart",p.containerTouchStartHandler,{passive:!1}),h.container.addEventListener("touchend",p.containerTouchEndHandler,{passive:!1}),document.addEventListener("mouseup",p.globalMouseUpHandler),document.addEventListener("touchend",p.globalTouchEndHandler,{passive:!1}),h.container.addEventListener("mouseleave",ft),p.bondCategoryTabsClickHandler=a=>{const o=a.target.closest(".tab");o&&!o.classList.contains("active")&&(h.bondCategoryTabs.querySelector(".tab.active")?.classList.remove("active"),o.classList.add("active"),v.currentCategory=o.dataset.category,H())},h.bondCategoryTabs.addEventListener("click",p.bondCategoryTabsClickHandler),p.influenceToggleChangeHandler=bt,h.influenceToggle.addEventListener("change",p.influenceToggleChangeHandler),p.selectedSpiritsListInputHandler=pe,h.selectedSpiritsList.addEventListener("input",p.selectedSpiritsListInputHandler),p.selectAllClickHandler=yt,h.selectAllBtn.addEventListener("click",p.selectAllClickHandler),p.clearAllSelectionClickHandler=St,h.clearAllSelectionBtn.addEventListener("click",p.clearAllSelectionClickHandler),p.applyBatchLevelClickHandler=()=>le("batchLevelInput"),h.applyBatchLevelBtn.addEventListener("click",p.applyBatchLevelClickHandler),p.findOptimalClickHandler=Be,h.findOptimalBtn.addEventListener("click",p.findOptimalClickHandler);const n=document.getElementById("panelToggleBtn"),t=document.getElementById("selectedSpiritsMobile"),e=document.getElementById("applyMobileBatchLevelBtn"),l=document.getElementById("setMaxMobileBatchLevelBtn"),i=document.getElementById("findOptimalMobileBtn");n&&(p.panelToggleBtnClickHandler=nt,n.addEventListener("click",p.panelToggleBtnClickHandler)),t&&(p.mobileSelectedSpiritsListInputHandler=pe,t.addEventListener("input",p.mobileSelectedSpiritsListInputHandler),t.addEventListener("touchstart",p.containerTouchStartHandler,{passive:!1}),t.addEventListener("mousedown",p.containerMouseDownHandler)),e&&(p.applyMobileBatchLevelClickHandler=it,e.addEventListener("click",p.applyMobileBatchLevelClickHandler)),l&&(p.setMaxMobileBatchLevelClickHandler=lt,l.addEventListener("click",p.setMaxMobileBatchLevelClickHandler)),i&&(p.findOptimalMobileClickHandler=st,i.addEventListener("click",p.findOptimalMobileClickHandler))}function ot(n){if(!n)return;const t=n.name;if(v.selectedSpirits.has(t))v.selectedSpirits.delete(t);else{const e=k(t)?25:0;v.selectedSpirits.set(t,{...n,level:e})}H()}function rt(n){const t=n.target,e=t.closest(".remove-spirit");if(e){n.preventDefault(),n.stopPropagation();const i=e.closest(".selected-spirit-card");if(i){const a=i.dataset.spiritName;a&&v.selectedSpirits.has(a)&&(v.selectedSpirits.delete(a),M(),H())}s.mouseDownTime=null;return}if(s.isPressed)return;const l=t.closest(".selected-spirit-card");if(l){const i=l.dataset.spiritName,a=v.selectedSpirits.get(i);if(!a){D.warn("Selected spirit not found in pageState for:",i);return}const c=t.closest("[data-action]"),o=c?c.dataset.action:null;let r=!1;switch(o){case"remove":v.selectedSpirits.delete(i),r=!0;break;case"level-down":if(k(i))break;a.level>0&&(a.level=Math.max(0,a.level-1),r=!0);break;case"level-up":if(k(i))break;a.level<25&&(a.level=Math.min(25,a.level+1),r=!0);break}r&&(M(),H())}s.mouseDownTime=null}function Ce(n){const t=n.target,e=t.closest(".selected-spirit-card");if(!e||t.closest(".remove-spirit"))return;const i=t.dataset.action;if(i!=="level-down"&&i!=="level-up")return;n.preventDefault(),n.stopPropagation();const a=e.dataset.spiritName;v.selectedSpirits.get(a)&&(s.timeoutId&&clearTimeout(s.timeoutId),s.intervalId&&clearInterval(s.intervalId),s.isPressed=!1,s.button=t,s.spiritName=a,s.action=i,s.hintHovered=!1,s.mouseDownTime=Date.now(),s.timeoutId=setTimeout(()=>{s.button===t&&mt()},300))}function ct(n){const t=n.target;if(!t.closest(".selected-spirit-card")||t.closest(".remove-spirit"))return;const i=t.classList.contains("level-btn")||t.classList.contains("minus-btn")||t.classList.contains("plus-btn"),a=t.dataset.action;if(!i||a!=="level-down"&&a!=="level-up")return;n.preventDefault(),n.stopPropagation(),s.touchStartTime=Date.now();const c={target:n.target,preventDefault:()=>{},stopPropagation:()=>{}};Ce(c)}function dt(n){if(s.isPressed){const t=n.changedTouches[0];if(s.hintElement){const e=s.hintElement.getBoundingClientRect();if(t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom){s.hintHovered=!0;const i=s.action==="level-down"?0:25,a=v.selectedSpirits.get(s.spiritName);a&&(a.level=i,M(),H())}}A(),n.preventDefault(),n.stopPropagation()}}function ut(n){if(!s.isPressed)return;const t=n.touches[0],e=document.elementFromPoint(t.clientX,t.clientY),l=s.hintElement,i=s.bridgeElement;if(!l)return;const a=e===l||l.contains(e),c=e===i;a?s.hintHovered||(s.hintHovered=!0,l.style.transform="scale(1.2)",l.style.fontSize="12px",l.style.fontWeight="900",l.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"):s.hintHovered&&!c&&(s.hintHovered=!1,l.style.transform="scale(1)",l.style.fontSize="10px",l.style.fontWeight="bold",l.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)")}function pt(n){if(!s.isPressed&&!s.timeoutId)return;const t=n.changedTouches[0],e=s.touchStartTime?Date.now()-s.touchStartTime:0;if(e>0&&e<300&&!s.isPressed){s.timeoutId&&(clearTimeout(s.timeoutId),s.timeoutId=null);const i=s.spiritName,a=s.action,c=v.selectedSpirits.get(i);if(c&&a&&!k(i)){let o=!1;a==="level-down"&&c.level>0?(c.level=Math.max(0,c.level-1),o=!0):a==="level-up"&&c.level<25&&(c.level=Math.min(25,c.level+1),o=!0),o&&(M(),H())}s.button=null,s.spiritName=null,s.action=null,s.touchStartTime=null;return}if(s.isPressed){if(s.hintElement){const i=s.hintElement.getBoundingClientRect();if(t.clientX>=i.left&&t.clientX<=i.right&&t.clientY>=i.top&&t.clientY<=i.bottom){s.hintHovered=!0;const c=s.action==="level-down"?0:25,o=v.selectedSpirits.get(s.spiritName);o&&(o.level=c,M(),H())}}A(),s.touchMoveHandler&&(document.removeEventListener("touchmove",s.touchMoveHandler),s.touchMoveHandler=null),s.touchStartTime=null;return}if(s.timeoutId){const i={target:document.elementFromPoint(t.clientX,t.clientY),clientX:t.clientX,clientY:t.clientY,type:"touchend"};He(i)}s.touchMoveHandler&&(document.removeEventListener("touchmove",s.touchMoveHandler),s.touchMoveHandler=null),s.touchStartTime=null}function He(n){if(!s.ignoreMouseUp){if(s.timeoutId&&!s.isPressed){clearTimeout(s.timeoutId),s.timeoutId=null,s.button=null,s.spiritName=null,s.action=null;return}if(s.isPressed){if(n.type==="touchend"&&s.hintElement){const t=s.hintElement.getBoundingClientRect();n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom&&(s.hintHovered=!0)}if(s.hintHovered){const t=s.action==="level-down"?0:25,e=v.selectedSpirits.get(s.spiritName);e&&(e.level=t,M(),H())}A()}}}function ft(n){if(s.isPressed){const t=n.relatedTarget===s.hintElement||s.hintElement?.contains(n.relatedTarget),e=n.relatedTarget===s.bridgeElement||s.bridgeElement?.contains(n.relatedTarget);if(t||e)return;A()}}function vt(n,t){const e=h.selectedSpiritsList.querySelector(`[data-spirit-name="${n}"]`);if(e){const i=e.querySelector(".level-input");i&&(i.value=t,i.setAttribute("value",t),i.dispatchEvent(new Event("input",{bubbles:!0})))}const l=document.getElementById("selectedSpiritsMobile");if(l){const i=l.querySelector(`[data-spirit-name="${n}"]`);if(i){const a=i.querySelector(".level-input");a&&(a.value=t,a.setAttribute("value",t),a.dispatchEvent(new Event("input",{bubbles:!0})))}}}function mt(){if(!s.button)return;s.isPressed=!0,s.ignoreMouseUp=!0,setTimeout(()=>{s.ignoreMouseUp=!1},100);try{gt()}catch(t){D.error("createHint ì—ëŸ¬:",t)}const n=()=>{if(!s.isPressed)return!1;const t=v.selectedSpirits.get(s.spiritName);if(!t||k(s.spiritName))return!1;t.level;let e=!1;return s.action==="level-down"&&t.level>0?(t.level=Math.max(0,t.level-1),e=!0):s.action==="level-up"&&t.level<25&&(t.level=Math.min(25,t.level+1),e=!0),e?(M(),vt(s.spiritName,t.level),!0):!1};n(),s.intervalId=setInterval(()=>{n()||A()},200)}function A(){s.intervalId&&(clearInterval(s.intervalId),s.intervalId=null),s.timeoutId&&(clearTimeout(s.timeoutId),s.timeoutId=null),ht(),s.touchMoveHandler&&(document.removeEventListener("touchmove",s.touchMoveHandler),s.touchMoveHandler=null),s.isPressed=!1,s.hintHovered=!1,s.bridgeElement=null,s.button=null,s.spiritName=null,s.action=null,s.mouseDownTime=null,s.touchStartTime=null,s.ignoreMouseUp=!1}function gt(){if(!s.button)return;const t=(s.action==="level-down"?0:25).toString(),e=document.createElement("div");e.className="level-hint",e.textContent=t;const l=s.button.getBoundingClientRect();e.style.position="fixed",e.style.top=l.top+"px",e.style.zIndex="1000",e.style.color="white",e.style.padding="0px 4px",e.style.margin="0",e.style.border="none",e.style.borderRadius="3px",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.pointerEvents="none",e.style.cursor="pointer",e.style.whiteSpace="nowrap",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)",e.style.textAlign="center",e.style.height=l.height+"px",e.style.lineHeight=l.height+"px",e.style.width="32px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.transition="all 0.2s ease",s.action==="level-down"?(e.style.left=l.left-36+"px",e.style.backgroundColor="#f44336"):(e.style.left=l.right+4+"px",e.style.backgroundColor="#4CAF50"),document.body.appendChild(e),s.hintElement=e,s.hintHovered=!1;const i=document.createElement("div");i.className="hint-bridge",i.style.position="fixed",i.style.top=l.top+"px",i.style.height=l.height+"px",i.style.zIndex="999",i.style.backgroundColor="transparent",i.style.pointerEvents="none",s.action==="level-down"?(i.style.left=l.left-36+"px",i.style.width=36+l.width+4+"px"):(i.style.left=l.left+"px",i.style.width=l.width+4+32+"px"),document.body.appendChild(i),s.bridgeElement=i;const a=()=>{s.isPressed&&(s.hintHovered=!0,e.style.transform="scale(1.2)",e.style.fontSize="12px",e.style.fontWeight="900",e.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)")},c=()=>{s.isPressed&&(s.hintHovered=!1,e.style.transform="scale(1)",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)")},o=()=>{if(D.log("ğŸ¯ íŒíŠ¸ í´ë¦­/í„°ì¹˜ ì¢…ë£Œ",{isPressed:s.isPressed,hintHovered:s.hintHovered}),s.isPressed){if(s.hintHovered){const r=s.action==="level-down"?0:25,u=v.selectedSpirits.get(s.spiritName);u&&(u.level=r,M(),H())}A()}};e.addEventListener("mouseenter",a),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",r=>{!i.contains(r.relatedTarget)&&r.relatedTarget!==i&&c()}),e.addEventListener("touchstart",r=>{r.preventDefault(),r.stopPropagation(),a()},{passive:!1}),e.addEventListener("touchend",r=>{r.preventDefault(),r.stopPropagation(),o()},{passive:!1}),s.touchMoveHandler=ut,document.addEventListener("touchmove",s.touchMoveHandler),i.addEventListener("mouseleave",r=>{!e.contains(r.relatedTarget)&&r.relatedTarget!==e&&c()}),i.addEventListener("touchstart",r=>{r.preventDefault(),r.stopPropagation(),a()},{passive:!1}),i.addEventListener("touchend",r=>{r.preventDefault(),r.stopPropagation()},{passive:!1}),setTimeout(()=>{e&&s.isPressed&&(e.style.pointerEvents="auto"),i&&s.isPressed&&(i.style.pointerEvents="auto")},0)}function ht(){s.hintElement&&(s.hintElement.remove(),s.hintElement=null),s.bridgeElement&&(s.bridgeElement.remove(),s.bridgeElement=null)}function bt(n){v.groupByInfluence=n.target.checked,M(),ne()}function pe(n){if(n.target.matches(".level-input")){const t=n.target.closest(".selected-spirit-card"),e=v.selectedSpirits.get(t.dataset.spiritName);if(e){if(k(t.dataset.spiritName)){n.target.value=25;return}let l=parseInt(n.target.value,10);(isNaN(l)||l<0)&&(l=0),l>25&&(l=25),e.level=l,n.target.value=l,M()}}}function St(){ie().forEach(t=>{v.selectedSpirits.has(t.name)&&v.selectedSpirits.delete(t.name)}),H()}function yt(){ie().forEach(t=>{v.selectedSpirits.has(t.name)||v.selectedSpirits.set(t.name,{...t,level:0})}),H()}function le(n){const t=document.getElementById(n),e=parseInt(t.value,10);if(isNaN(e)||e<0||e>25){alert("0ì—ì„œ 25 ì‚¬ì´ì˜ ë ˆë²¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}v.selectedSpirits.forEach(l=>{l.type===v.currentCategory&&(l.level=e)}),H()}function Lt(n){const t=document.getElementById(n);t&&(t.value=25,le(n))}async function Be(){const n=[...v.selectedSpirits.values()].filter(o=>o.type===v.currentCategory).map(o=>({name:o.name,level:o.level}));if(n.length===0){alert("í˜„ì¬ íƒ­ì—ì„œ ì„ íƒëœ í™˜ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.");return}re("calculate_optimal","Bond Calculator",{num_creatures:n.length,category:v.currentCategory});const t=document.getElementById("app-container"),e=performance.now(),l=n.length;let i="";l>6?i="ìµœì  ì¡°í•© íƒìƒ‰ ì¤‘...":i="ì¡°í•© ê³„ì‚° ì¤‘...",we(t,"ìµœì  ì¡°í•© ê³„ì‚° ì¤‘",i,0,"ì´ˆê¸°í™” ì¤‘...");let a=0;const c=setInterval(()=>{a<90&&(a+=Math.random()*10,l>6?j(a,`ì¡°í•© íƒìƒ‰ ì¤‘... ${Math.round(a)}%`):j(a,`ê³„ì‚° ì¤‘... ${Math.round(a)}%`))},500);try{const o=await ke(n);clearInterval(c),j(100,"ì™„ë£Œ!"),await new Promise(u=>setTimeout(u,300));const r=performance.now()-e;if(ce("bond",r,{num_creatures:l,score:o?.scoreWithBind||0}),!o||!o.spirits)throw new Error("APIì—ì„œ ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");he(o),Ge(o,!1),re("open_result_modal","Bond Calculator")}catch(o){clearInterval(c);const r=performance.now()-e;ce("bond",r,{num_creatures:l,success:!1}),de.handle(o,"Optimal combination calculation"),alert(de.getUserFriendlyMessage(o.message))}finally{$e()}}function Et(n){Me(),n.innerHTML=Qe();const t=`
    <button class="panel-toggle-button" id="panelToggleBtn">
        ì„ íƒëœ í™˜ìˆ˜ <span id="mobileSelectedCount">0</span>ê°œ <span class="toggle-icon">â–²</span>
    </button>
    <div class="right-panel collapsed">
        <div class="selected-spirits-container">
            <div class="selected-spirits-header">
                <h3>ì„ íƒëœ í™˜ìˆ˜</h3>
                <div class="header-controls">
                    <div class="level-batch-control">
                        <label>ì¼ê´„ ë ˆë²¨ ì„¤ì •:</label>
                        <input type="number" id="mobileBatchLevel" min="0" max="25" value="0">
                        <button id="applyMobileBatchLevelBtn" class="btn btn-primary apply-level-btn">ì ìš©</button>
                        <button id="setMaxMobileBatchLevelBtn" class="btn btn-warning max-level-btn">Max</button>
                    </div>
                    <div class="calculate-btn-small">
                        <button id="findOptimalMobileBtn" class="btn btn-secondary">ì°¾ê¸°</button>
                    </div>
                </div>
            </div>
            <div id="selectedSpiritsMobile" class="selected-spirits"></div>
        </div>
    </div>`,e=I("div","panel-toggle-container",{id:"panelToggleContainer"});e.innerHTML=t,document.body.appendChild(e);const l=h;l.container=n,l.bondCategoryTabs=n.querySelector("#bondCategoryTabs"),l.spiritListContainer=n.querySelector("#spiritListContainer"),l.selectedSpiritsList=n.querySelector("#selectedSpiritsList"),l.selectedCount=n.querySelector("#selectedCount"),l.selectAllBtn=n.querySelector("#selectAllBtn"),l.clearAllSelectionBtn=n.querySelector("#clearAllSelectionBtn"),l.batchLevelInput=n.querySelector("#batchLevelInput"),l.applyBatchLevelBtn=n.querySelector("#applyBatchLevelBtn"),l.findOptimalBtn=n.querySelector("#findOptimalBtn"),l.influenceToggle=n.querySelector("#influenceToggle"),et(),n.querySelectorAll(".sub-tabs .tab").forEach(i=>{i.classList.toggle("active",i.dataset.category===v.currentCategory)}),h.influenceToggle.checked=v.groupByInfluence,at(),tt(),H()}function Ct(){return`
        <div class="content-block">
            <h2>í™˜ìˆ˜ ê²°ì† ê³„ì‚°ê¸° ì‚¬ìš© ì•ˆë‚´</h2>
            <p>í™˜ìˆ˜ ê²°ì† ì‹œìŠ¤í…œì€ 6ë§ˆë¦¬ í™˜ìˆ˜ì˜ ì¡°í•©ì„ í†µí•´ ë‹¤ì–‘í•œ ëŠ¥ë ¥ì¹˜ ì‹œë„ˆì§€ë¥¼ ì–»ëŠ” í•µì‹¬ ì½˜í…ì¸ ì…ë‹ˆë‹¤. 'ë°”ì—°í™”ì—°'ì˜ ê²°ì† ê³„ì‚°ê¸°ëŠ” ì—¬ëŸ¬ë¶„ì´ ë³´ìœ í•œ í™˜ìˆ˜ë“¤ë¡œ ë‹¬ì„±í•  ìˆ˜ ìˆëŠ” ìµœì ì˜ ì¡°í•©ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.</p>
            <p>ì´ ê³„ì‚°ê¸°ëŠ” <strong>í”¼í•´ì €í•­, í”¼í•´ì €í•­ê´€í†µ, ëŒ€ì¸í”¼í•´%*10, ëŒ€ì¸ë°©ì–´%*10</strong>ë¥¼ í•©ì‚°í•œ 'í™˜ì‚° ì ìˆ˜'ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìµœì ì˜ ì¡°í•©ì„ ì°¾ì•„ë‚´ë©°, ìœ ì „ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ìˆ˜ë§ì€ ê²½ìš°ì˜ ìˆ˜ë¥¼ ë¹ ë¥´ê²Œ íƒìƒ‰í•©ë‹ˆë‹¤.</p>

            <h3>í˜ì´ì§€ ê¸°ëŠ¥ ì„¤ëª…</h3>
            <ul>
                <li><strong>ì¹´í…Œê³ ë¦¬ ì„ íƒ:</strong> 'ìˆ˜í˜¸', 'íƒ‘ìŠ¹', 'ë³€ì‹ ' íƒ­ì„ í´ë¦­í•˜ì—¬ í•´ë‹¹ ì¢…ë¥˜ì˜ í™˜ìˆ˜ ëª©ë¡ì„ í™•ì¸í•˜ì„¸ìš”. ê²°ì† ì¡°í•©ì€ ë™ì¼ ì¹´í…Œê³ ë¦¬ ë‚´ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                <li><strong>í™˜ìˆ˜ ì„ íƒ:</strong> ì¢Œì¸¡ 'ì „ì²´ í™˜ìˆ˜ ëª©ë¡'ì—ì„œ ê²°ì† ì¡°í•©ì— ì‚¬ìš©í•  í™˜ìˆ˜ë¥¼ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”. ì„ íƒëœ í™˜ìˆ˜ëŠ” ìš°ì¸¡ 'ì„ íƒëœ í™˜ìˆ˜' ëª©ë¡ì— ì¶”ê°€ë©ë‹ˆë‹¤. (ë ˆë²¨ì€ 0ìœ¼ë¡œ ìë™ ì„¤ì •ë©ë‹ˆë‹¤.)</li>
                <li><strong>ì „ì²´ ì„ íƒ/í•´ì œ:</strong> 'í˜„ì¬ íƒ­ ì „ì²´ ì„ íƒ' ë˜ëŠ” 'í˜„ì¬ íƒ­ ì „ì²´ í•´ì œ' ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ëª¨ë“  í™˜ìˆ˜ë¥¼ í•œ ë²ˆì— ì„ íƒí•˜ê±°ë‚˜ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>í™˜ìˆ˜ ë ˆë²¨ ì¡°ì ˆ:</strong> ìš°ì¸¡ ì„ íƒëœ í™˜ìˆ˜ ëª©ë¡ì—ì„œ ê° í™˜ìˆ˜ì˜ ë ˆë²¨ì„ 0~25 ì‚¬ì´ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ì¼ê´„ ë ˆë²¨ ì ìš©' ê¸°ëŠ¥ìœ¼ë¡œ ëª¨ë“  í™˜ìˆ˜ì˜ ë ˆë²¨ì„ í•œ ë²ˆì— ë³€ê²½í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ìµœì  ì¡°í•© ì°¾ê¸°:</strong> 'ìµœì  ì¡°í•© ì°¾ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì„ íƒëœ í™˜ìˆ˜ë“¤ ì¤‘ ê°€ì¥ ë†’ì€ í™˜ì‚° ì ìˆ˜ë¥¼ ë‚´ëŠ” 6ë§ˆë¦¬ ì¡°í•©ì„ ì°¾ì•„ ëª¨ë‹¬ ì°½ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.</li>
                <li><strong>ê²°ê³¼ ëª¨ë‹¬ í™•ì¸:</strong>
                    <ul>
                        <li><strong>ì¡°í•© í•©ì‚° ì ìˆ˜:</strong> ëª¨ë‹¬ í—¤ë”ì— 'ì¡°í•© í•©ì‚°: 1234 (123)' í˜•ì‹ìœ¼ë¡œ ì´ì ìˆ˜(ë“±ë¡í¬í•¨)ì™€ ê²°ì†ì ìˆ˜ë¥¼ í•¨ê»˜ í‘œì‹œí•©ë‹ˆë‹¤. ë“±ë¡ íš¨ê³¼ê°€ ì—†ì„ ê²½ìš° 'ì¡°í•© í•©ì‚°: 1234' í˜•ì‹ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</li>
                        <li><strong>ì¡°í•© ì €ì¥ ë²„íŠ¼:</strong> í—¤ë” ìš°ì¸¡ì— ìœ„ì¹˜í•œ 'ì¡°í•© ì €ì¥' ë²„íŠ¼ìœ¼ë¡œ í˜„ì¬ ì¡°í•©ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                        <li><strong>í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ í™˜ìˆ˜ ì„ íƒ:</strong> ê²°ê³¼ ëª¨ë‹¬ì˜ ì¡°í•© í™˜ìˆ˜ ëª©ë¡ì—ì„œ í˜„ì¬ ê²Œì„ì—ì„œ ì‚¬ìš© ì¤‘ì¸ í™˜ìˆ˜ë¥¼ í´ë¦­í•˜ë©´ ë“±ë¡ íš¨ê³¼ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ í—¤ë” ì ìˆ˜ì— ë°˜ì˜ë©ë‹ˆë‹¤.</li>
                        <li><strong>ë ˆë²¨ ì¡°ì ˆ (ì¥ê¸° ëˆ„ë¥´ê¸°):</strong> ê° í™˜ìˆ˜ì˜ +/- ë²„íŠ¼ì„ ì§§ê²Œ ëˆ„ë¥´ë©´ 1ë ˆë²¨ì”©, ê¸¸ê²Œ ëˆ„ë¥´ë©´ ì—°ì†ìœ¼ë¡œ ë ˆë²¨ì´ ë³€ê²½ë©ë‹ˆë‹¤. ëª¨ë°”ì¼ì—ì„œë„ í„°ì¹˜ë¡œ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ë©°, ì¡°í•© í•©ì‚° ì ìˆ˜ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.</li>
                        <li><strong>ì¡°í•© í™˜ìˆ˜:</strong> ì„ íƒëœ 6ë§ˆë¦¬ í™˜ìˆ˜ì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ë©°, ê° í™˜ìˆ˜ì˜ ë ˆë²¨ë„ í‘œì‹œë©ë‹ˆë‹¤.</li>
                        <li><strong>íš¨ê³¼ë³„ ìŠ¤íƒ¯:</strong> ë“±ê¸‰, ì„¸ë ¥, ì¥ì°© íš¨ê³¼ë¡œ ì¸í•´ ì¦ê°€í•˜ëŠ” ëŠ¥ë ¥ì¹˜ ëª©ë¡ê³¼ í•©ì‚° ì ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                        <li><strong>ìƒì„¸ ìŠ¤íƒ¯ ë¹„êµ:</strong> ì„ íƒëœ 6ë§ˆë¦¬ í™˜ìˆ˜ ê°ê°ì˜ ìƒì„¸ ì¥ì°© ìŠ¤íƒ¯ê³¼ ì´í•©ì„ ë¹„êµí•˜ì—¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    </ul>
                </li>
                <li><strong>ê¸°ë¡ íƒ­:</strong> ì´ì „ì— ê³„ì‚°í–ˆë˜ ìµœì  ì¡°í•© ê²°ê³¼ë“¤ì„ ê¸°ë¡ íƒ­ì—ì„œ ë‹¤ì‹œ í™•ì¸í•˜ê³  ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ìµœì‹ ', 'ìµœê³ ' ì ìˆ˜ë¥¼ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            </ul>

            <h3>ê²°ì† ì‹œìŠ¤í…œ íŒ & ì „ëµ</h3>
            <ul>
                <li><strong>PvEì™€ PvP ì¡°í•©:</strong> ë³´ìŠ¤ ì‚¬ëƒ¥ì„ ìœ„í•œ ì¡°í•©(í”¼í•´ì €í•­ê´€í†µ, ë³´ìŠ¤ëª¬ìŠ¤í„°ì¶”ê°€í”¼í•´)ê³¼ PvPë¥¼ ìœ„í•œ ì¡°í•©(ëŒ€ì¸ë°©ì–´%, í”¼í•´ì €í•´)ì€ ìŠ¤íƒ¯ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤. ëª©í‘œì— ë§ëŠ” ì¡°í•©ì„ ì°¾ì•„ë³´ì„¸ìš”.</li>
                <li><strong>ë“±ê¸‰ ì‹œë„ˆì§€ vs ì„¸ë ¥ ì‹œë„ˆì§€:</strong> ì „ì„¤/ë¶ˆë©¸ í™˜ìˆ˜ ê°¯ìˆ˜ì— ë”°ë¥¸ ë“±ê¸‰ ì‹œë„ˆì§€ì™€ ê°™ì€ ì„¸ë ¥ í™˜ìˆ˜ ê°¯ìˆ˜ì— ë”°ë¥¸ ì„¸ë ¥ ì‹œë„ˆì§€ì„ ëª¨ë‘ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë•Œë¡œëŠ” ë‚®ì€ ë“±ê¸‰ì´ë¼ë„ ì„¸ë ¥ ì‹œë„ˆì§€ë¥¼ ë§ì¶”ëŠ” ê²ƒì´ ë” ìœ ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ì‹¤ì‹œê°„ ë ˆë²¨ ì¡°ì •:</strong> ê²°ê³¼ ëª¨ë‹¬ì—ì„œ ê° í™˜ìˆ˜ì˜ ë ˆë²¨ì„ +/- ë²„íŠ¼ìœ¼ë¡œ ì¡°ì •í•˜ë©´ ì¡°í•© í•©ì‚° ì ìˆ˜ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤. ì¥ê¸° ëˆ„ë¥´ê¸°ë¡œ ë¹ ë¥´ê²Œ ë ˆë²¨ì„ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë°”ì¼ì—ì„œë„ í„°ì¹˜ë¡œ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.</li>
                <li><strong>ê³ ë ˆë²¨ í™˜ìˆ˜ì˜ ì¤‘ìš”ì„±:</strong> ì¥ì°© íš¨ê³¼ëŠ” í™˜ìˆ˜ ë ˆë²¨ì— ë”°ë¼ í¬ê²Œ ì¦ê°€í•˜ë¯€ë¡œ, ì£¼ìš” í™˜ìˆ˜ëŠ” 25ë ˆë²¨ê¹Œì§€ ìœ¡ì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë ˆë²¨ ì¡°ì • ê¸°ëŠ¥ìœ¼ë¡œ ë ˆë²¨ë³„ ì ìˆ˜ ë³€í™”ë¥¼ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ëª¨ë“  í™˜ìˆ˜ í™œìš©:</strong> ë‹¨ìˆœíˆ ë³´ìœ  í™˜ìˆ˜ ì¤‘ ê°•í•œ í™˜ìˆ˜ 6ë§ˆë¦¬ë¥¼ ê³ ë¥´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê²°ì† ê³„ì‚°ê¸°ë¥¼ í†µí•´ ì˜ˆìƒì¹˜ ëª»í•œ ì¡°í•©ì´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ë“±ë¡ íš¨ê³¼ í™œìš©:</strong> ê²°ê³¼ ëª¨ë‹¬ì—ì„œ í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ í™˜ìˆ˜ë¥¼ ì„ íƒí•˜ì—¬ ë“±ë¡ íš¨ê³¼ë¥¼ ë°˜ì˜í•˜ë©´ ì‹¤ì œ ê²Œì„ì—ì„œì˜ ì´ ëŠ¥ë ¥ì¹˜ë¥¼ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í—¤ë”ì— 'ì¡°í•© í•©ì‚°: ì´ì  (ê²°ì†ì )' í˜•ì‹ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</li>
                <li><strong>ë¹ ë¥¸ ì¡°í•© ì €ì¥:</strong> í—¤ë” ìš°ì¸¡ì˜ 'ì¡°í•© ì €ì¥' ë²„íŠ¼ìœ¼ë¡œ í˜„ì¬ ì¡°í•©ì„ ê¸°ë¡ íƒ­ì— ì €ì¥í•˜ì—¬ ë‚˜ì¤‘ì— ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            </ul>
        </div>
    `}function Me(){if(h.container){h.bondCategoryTabs&&p.bondCategoryTabsClickHandler&&h.bondCategoryTabs.removeEventListener("click",p.bondCategoryTabsClickHandler),h.container&&p.containerClickHandler&&h.container.removeEventListener("click",p.containerClickHandler),h.influenceToggle&&p.influenceToggleChangeHandler&&h.influenceToggle.removeEventListener("change",p.influenceToggleChangeHandler),h.selectedSpiritsList&&p.selectedSpiritsListInputHandler&&h.selectedSpiritsList.removeEventListener("input",p.selectedSpiritsListInputHandler),h.selectAllBtn&&p.selectAllClickHandler&&h.selectAllBtn.removeEventListener("click",p.selectAllClickHandler),h.clearAllSelectionBtn&&p.clearAllSelectionClickHandler&&h.clearAllSelectionBtn.removeEventListener("click",p.clearAllSelectionClickHandler),h.applyBatchLevelBtn&&p.applyBatchLevelClickHandler&&h.applyBatchLevelBtn.removeEventListener("click",p.applyBatchLevelClickHandler),h.findOptimalBtn&&p.findOptimalClickHandler&&h.findOptimalBtn.removeEventListener("click",p.findOptimalClickHandler);const n=document.getElementById("panelToggleBtn"),t=document.getElementById("selectedSpiritsMobile"),e=document.getElementById("applyMobileBatchLevelBtn"),l=document.getElementById("setMaxMobileBatchLevelBtn"),i=document.getElementById("findOptimalMobileBtn");n&&p.panelToggleBtnClickHandler&&n.removeEventListener("click",p.panelToggleBtnClickHandler),t&&p.mobileSelectedSpiritsListInputHandler&&t.removeEventListener("input",p.mobileSelectedSpiritsListInputHandler),e&&p.applyMobileBatchLevelClickHandler&&e.removeEventListener("click",p.applyMobileBatchLevelClickHandler),l&&p.setMaxMobileBatchLevelClickHandler&&l.removeEventListener("click",p.setMaxMobileBatchLevelClickHandler),i&&p.findOptimalMobileClickHandler&&i.removeEventListener("click",p.findOptimalMobileClickHandler);const a=document.getElementById("panelToggleContainer");a&&a.remove()}}const It=Object.freeze(Object.defineProperty({__proto__:null,cleanup:Me,getHelpContentHTML:Ct,init:Et},Symbol.toStringTag,{value:"Module"}));export{It as b,Ge as s};
