import{s as P,a as we,u as J,c as ke,h as $e}from"./main-dJC9VFyd.js";import{c as I,i as w,e as y,S as X,F as Pe,P as F,a as De,b as Ne,r as Ae,d as Oe}from"./components-B1GG1ywu.js";import{L as D,a as Re,l as re,n as ce,E as de}from"./utils-DIa4fKeE.js";const fe="savedOptimalCombinations",ve="combinationCounter",qe=5;function z(){try{const n=localStorage.getItem(fe),t=n?JSON.parse(n):{ìˆ˜í˜¸:[],íƒ‘ìŠ¹:[],ë³€ì‹ :[]};return t.ìˆ˜í˜¸||(t.ìˆ˜í˜¸=[]),t.íƒ‘ìŠ¹||(t.íƒ‘ìŠ¹=[]),t.ë³€ì‹ ||(t.ë³€ì‹ =[]),t}catch(n){return console.error("Failed to load history from localStorage:",n),{ìˆ˜í˜¸:[],íƒ‘ìŠ¹:[],ë³€ì‹ :[]}}}function me(){try{const n=localStorage.getItem(ve),t=n?JSON.parse(n):{ìˆ˜í˜¸:0,íƒ‘ìŠ¹:0,ë³€ì‹ :0};return t.ìˆ˜í˜¸===void 0&&(t.ìˆ˜í˜¸=0),t.íƒ‘ìŠ¹===void 0&&(t.íƒ‘ìŠ¹=0),t.ë³€ì‹ ===void 0&&(t.ë³€ì‹ =0),t}catch(n){return console.error("Failed to load counter from localStorage:",n),{ìˆ˜í˜¸:0,íƒ‘ìŠ¹:0,ë³€ì‹ :0}}}function ge(n,t){try{localStorage.setItem(fe,JSON.stringify(n)),localStorage.setItem(ve,JSON.stringify(t))}catch(e){console.error("ê¸°ë¡ ì €ì¥ ì‹¤íŒ¨:",e),alert("ì¡°í•© ê¸°ë¡ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì €ì¥ ê³µê°„ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")}}function he(n){if(!n||!n.spirits||n.spirits.length===0||!n.spirits[0].type){console.warn("Invalid result data provided to addResult:",n);return}const t=n.spirits[0].type;if(!["ìˆ˜í˜¸","íƒ‘ìŠ¹","ë³€ì‹ "].includes(t)){console.warn(`Invalid category '${t}' for history storage.`);return}const e=z(),i=me();i[t]===void 0&&(i[t]=0);const l=new Date,a={...n,timestamp:l.toLocaleString("sv-SE"),id:l.getTime()};let r=-1;for(let o=0;o<qe;o++)if(!e[t][o]){r=o;break}r===-1&&(r=e[t].map((d,f)=>({entry:d,index:f})).filter(({entry:d})=>d!==null).reduce((d,f)=>!d||f.entry.id<d.entry.id?f:d,null)?.index||0),e[t][r]=a,i[t]++,ge(e,i)}function Fe(n,t){const e=z(),i=me();if(!e[n])return console.warn(`Attempted to remove from unknown category: ${n}`),!1;const l=e[n].findIndex(a=>a&&a.id===t);return l===-1?(console.warn(`Entry with id ${t} not found in category ${n}`),!1):(e[n][l]=null,ge(e,i),!0)}function be(n){const t=z();if(!t[n])return console.warn(`Attempted to retrieve history for unknown category: ${n}`),[];const e=t[n].filter(Boolean);return e.sort((i,l)=>l.id-i.id),e}let q=null,L=null,H=null,b=[],c={isPressed:!1,intervalId:null,timeoutId:null,hintElement:null,bridgeElement:null,hintHovered:!1,button:null,spiritName:null,action:null,mouseDownTime:null};const G={damageResistance:"stat-damage-resistance",damageResistancePenetration:"stat-damage-resistance-penetration",pvpDefensePercent:"stat-pvp-defense-percent",pvpDamagePercent:"stat-pvp-damage-percent"},_e=["damageResistance","damageResistancePenetration","pvpDamagePercent","pvpDefensePercent"];function Z(n,t){if(!n)return{spiritName:null,stats:[],totalScore:0};const e=P.allSpirits.find(o=>o.name===n);if(!e)return{spiritName:n,stats:[],totalScore:0};const l=e.stats.find(o=>o.level===t)?.registrationStat||{};let a=0;const r=[];return Object.entries(l).forEach(([o,d])=>{const f=y(d),m=X[o]||o;o==="damageResistance"||o==="damageResistancePenetration"?a+=f:(o==="pvpDamagePercent"||o==="pvpDefensePercent")&&(a+=f*10),f>0&&r.push({key:o,name:m,value:f,isScoreContributing:_e.includes(o)})}),{spiritName:n,stats:r,totalScore:Math.round(a)}}function Q(n){let t=0;const e={};return n.forEach(i=>{const l=P.allSpirits.find(a=>a.name===i.name&&a.type===i.type);if(l){const a=l.stats.find(r=>r.level===i.stats[0].level);a?.bindStat&&Object.entries(a.bindStat).forEach(([r,o])=>{const d=y(o);e[r]=(e[r]||0)+d,r==="damageResistance"||r==="damageResistancePenetration"?t+=d:(r==="pvpDamagePercent"||r==="pvpDefensePercent")&&(t+=d*10)})}}),{bindScore:t,bindStats:Object.entries(e).filter(([,i])=>i>0).map(([i,l])=>({key:i,name:X[i]||i,value:l}))}}function Y(n,t,e,i,l={}){const a=document.getElementById(n);if(!a)return;let r="";l.gradeCounts?r=Object.entries(l.gradeCounts).filter(([,g])=>g>=2).map(([g,p])=>`<span class="grade-tag grade-tag-${g==="ì „ì„¤"?"legend":"immortal"}">${g}x${p}</span>`).join(" "):l.factionCounts&&(r=Object.entries(l.factionCounts).filter(([,g])=>g>=2).map(([g,p])=>{const C=Pe[g]||"";return`<span class="faction-tag" title="${g}"><img src="${C}" class="faction-icon" alt="${g}">x${p}</span>`}).join(" "));const o=Array.isArray(e)?e:[],d=["damageResistance","damageResistancePenetration","pvpDamagePercent","pvpDefensePercent"],f=[...o].sort((g,p)=>{const C=d.includes(g.key),E=d.includes(p.key);return C&&!E?-1:!C&&E?1:C&&E?d.indexOf(g.key)-d.indexOf(p.key):(g.name||g.key).localeCompare(p.name||p.key)});let m='<p class="no-effects">íš¨ê³¼ ì—†ìŒ</p>';f.length>0&&(m=`<ul class="effects-list">${f.map(g=>{const C=F.includes(g.key)?`${y(g.value)}%`:y(g.value).toLocaleString();return`<li class="${G[g.key]||""}"><span class="stat-name">${g.name}</span><span class="stat-value">${C}</span></li>`}).join("")}</ul>`),a.innerHTML=`
        <h4>${t} <span class="section-score">${Math.round(y(i))}</span></h4>
        ${r?`<div class="set-info">${r}</div>`:""}
        <div class="effects-content">${m}</div>
    `}function Ve(){U();const n=I("div","modal-overlay",{id:"optimalModal"}),t=I("div","modal-content",{id:"optimalModalContent"}),e=I("button","modal-close",{id:"closeOptimalModal",text:"âœ•"});t.appendChild(e),n.appendChild(t),document.body.appendChild(n),e.onclick=U,n.addEventListener("click",l=>{l.target===n&&U()});const i=l=>{l.key==="Escape"&&U()};return document.addEventListener("keydown",i),n._escListener=i,q=n,{modal:n,content:t}}function Se(){const n=document.getElementById("registrationEffectSection");if(!n)return;if(!L){n.style.display="none";return}const t=b.find(r=>r.name===L),e=t?t.stats[0].level:25,i=Z(L,e);if(i.stats.length===0){n.innerHTML=`
      <h4>ë“±ë¡ íš¨ê³¼ <span class="section-score">0</span></h4>
      <div class="set-info">
        <span class="registration-spirit-tag">ì‚¬ìš©ì¤‘: ${L}</span>
      </div>
      <div class="effects-content">
        <p class="no-effects">ë“±ë¡ íš¨ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</p>
      </div>
    `,n.style.display="block";return}const a=`<ul class="effects-list">${i.stats.map(r=>{const d=F.includes(r.key)?`${r.value}%`:r.value.toLocaleString();return`<li class="${G[r.key]||""}"><span class="stat-name">${r.name}</span><span class="stat-value">${d}</span></li>`}).join("")}</ul>`;n.innerHTML=`
    <h4>ë“±ë¡ íš¨ê³¼ <span class="section-score">${i.totalScore}</span></h4>
    <div class="set-info">
      <span class="registration-spirit-tag">ì‚¬ìš©ì¤‘: ${L}</span>
    </div>
    <div class="effects-content">
      ${a}
    </div>
  `,n.style.display="block"}function ye(){const n=document.getElementById("hiddenRegistrationStats"),t=document.querySelector(".more-stats-button");if(n&&t)if(n.style.display==="none"){n.style.display="block";const e=n.querySelectorAll("li").length;t.textContent=`${e}ê°œ ìˆ¨ê¸°ê¸°`}else{n.style.display="none";const e=n.querySelectorAll("li").length;t.textContent=`+${e}ê°œ ë” ë³´ê¸°`}}function N(){if(!H)return;b.forEach((p,C)=>{});const n=Q(b),t=y(H.gradeScore),e=y(H.factionScore),i=Math.round(t+e+n.bindScore),l=b.find(p=>p.name===L),a=l?l.stats[0].level:25,o=Z(L,a).totalScore,d=i+o;o>0?`${d.toLocaleString()}${i.toLocaleString()}`:`${i.toLocaleString()}`;let f,m;o>0?(f=`ì¡°í•© í•©ì‚°: ${d.toLocaleString()} (${i.toLocaleString()})`,m="í•©ì‚° = ë“±ë¡ íš¨ê³¼ + ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)"):(f=`ì¡°í•© í•©ì‚°: ${i.toLocaleString()}`,m="í•©ì‚° = ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)");const g=document.getElementById("optimalHeader");if(g){const p=g.querySelector(".modal-main-title");p&&(p.innerHTML=`
        ${f}
        <span class="score-formula">${m}</span>
      `)}Y("optimalBindEffects","ê²°ì† íš¨ê³¼",n.bindStats,n.bindScore),Se(),Ce(b,H.gradeEffects||[],H.factionEffects||[]),window.toggleMoreStats=ye}function We(){if(!H||!b||b.length===0){alert("ì €ì¥í•  ì¡°í•© ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const n=Q(b),t=y(H.gradeScore),e=y(H.factionScore),i=b.find(f=>f.name===L),l=i?i.stats[0].level:25,r=Z(L,l).totalScore,o=Math.round(t+e+n.bindScore+r),d={...H,spirits:b.map(f=>({...f,stats:[{level:f.stats[0].level}]})),bindScore:n.bindScore,bindStats:n.bindStats,gradeScore:t,factionScore:e,scoreWithBind:Math.round(t+e+n.bindScore),registrationScore:r,totalScoreWithRegistration:o,selectedUsedSpirit:L,combination:b.map(f=>f.name),timestamp:new Date().toLocaleString("sv-SE"),id:Date.now()};he(d),alert("ì¡°í•©ì´ ê¸°ë¡ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!"),setTimeout(()=>{b[0]?.type&&te(b[0].type)},100)}function Ue(n,t,e){if(e.stopPropagation(),confirm("ì´ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))if(Fe(n,t)){const l=be(n);if(H&&H.id===t)if(l.length>0){const a=l[0];L=a.selectedUsedSpirit||null,H=JSON.parse(JSON.stringify(a)),b=JSON.parse(JSON.stringify(a.spirits)),ee(a,!1)}else{L=null,H=null,b=[];const a=document.getElementById("optimalHeader");a&&(a.innerHTML=`
              <div class="optimal-header-left">
                <h3 class="modal-main-title">ì¡°í•© í•©ì‚°: ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤</h3>
              </div>
              <div class="optimal-header-right">
                <button class="header-save-button" onclick="saveCombination()">ì¡°í•© ì €ì¥</button>
              </div>
            `);const r=document.getElementById("combinationResultsContainer");r&&(r.innerHTML='<p class="no-data-message">ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>')}te(n)}else alert("ê¸°ë¡ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}function Le(n){const t=n.target;if(!t.classList.contains("level-btn"))return;const e=t.dataset.action;if(e!=="level-down"&&e!=="level-up")return;n.preventDefault(),n.stopPropagation();const i=t.dataset.spirit;i&&(c.timeoutId&&clearTimeout(c.timeoutId),c.intervalId&&clearInterval(c.intervalId),c.isPressed=!1,c.button=t,c.spiritName=i,c.action=e,c.hintHovered=!1,c.mouseDownTime=Date.now(),c.timeoutId=setTimeout(()=>{c.button===t&&Je()},300))}function Ye(n){n.touches[0],Le({target:n.target,preventDefault:()=>n.preventDefault(),stopPropagation:()=>n.stopPropagation()})}function je(n){const t=n.changedTouches[0],e={target:document.elementFromPoint(t.clientX,t.clientY),clientX:t.clientX,clientY:t.clientY,type:"touchend"};K(e)}function Je(){if(!c.button)return;c.isPressed=!0;try{Xe()}catch(t){D.error("createModalHint ì—ëŸ¬:",t)}const n=()=>{if(!c.isPressed)return!1;const t=b.findIndex(l=>l.name===c.spiritName);if(t===-1||w(c.spiritName))return!1;const e=b[t];e.stats[0].level;let i=!1;if(c.action==="level-down"&&e.stats[0].level>0?(e.stats[0].level=Math.max(0,e.stats[0].level-1),i=!0):c.action==="level-up"&&e.stats[0].level<25&&(e.stats[0].level=Math.min(25,e.stats[0].level+1),i=!0),i){const l=c.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");l&&(l.textContent=`Lv.${e.stats[0].level}`);const a=c.button.closest(".spirit-info-item-with-level").querySelector(".level-input");return a&&(a.value=e.stats[0].level),N(),!0}return!1};n(),c.intervalId=setInterval(()=>{n()||j()},200)}function j(){c.intervalId&&(clearInterval(c.intervalId),c.intervalId=null),c.timeoutId&&(clearTimeout(c.timeoutId),c.timeoutId=null),ze(),c.isPressed=!1,c.hintHovered=!1,c.bridgeElement=null,c.button=null,c.spiritName=null,c.action=null,c.mouseDownTime=null}function Xe(){if(!c.button)return;const t=(c.action==="level-down"?0:25).toString(),e=document.createElement("div");e.className="level-hint",e.textContent=t;const i=c.button.getBoundingClientRect();e.style.position="fixed",e.style.top=i.top+"px",e.style.zIndex="2100",e.style.color="white",e.style.padding="0px 4px",e.style.margin="0",e.style.border="none",e.style.borderRadius="3px",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.pointerEvents="auto",e.style.cursor="pointer",e.style.whiteSpace="nowrap",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)",e.style.textAlign="center",e.style.height=i.height+"px",e.style.width="30px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.transition="all 0.2s ease",c.action==="level-down"?(e.style.left=i.left-30+"px",e.style.backgroundColor="#f44336"):(e.style.left=i.right+"px",e.style.backgroundColor="#4CAF50"),e.style.lineHeight=i.height+"px",document.body.appendChild(e),c.hintElement=e,c.hintHovered=!1;const l=document.createElement("div");l.className="hint-bridge",l.style.position="fixed",l.style.top=i.top+"px",l.style.height=i.height+"px",l.style.zIndex="2099",l.style.backgroundColor="transparent",l.style.pointerEvents="auto",c.action==="level-down"?(l.style.left=i.left-35+"px",l.style.width=35+i.width+"px"):(l.style.left=i.left+"px",l.style.width=i.width+35+"px"),document.body.appendChild(l),c.bridgeElement=l;const a=()=>{c.isPressed&&(c.hintHovered=!0,e.style.transform="scale(1.2)",e.style.fontSize="12px",e.style.fontWeight="900",e.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)")},r=()=>{c.isPressed&&(c.hintHovered=!1,e.style.transform="scale(1)",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)")},o=()=>{if(c.isPressed&&c.hintHovered){const d=c.action==="level-down"?0:25,f=b.findIndex(m=>m.name===c.spiritName);if(f!==-1){b[f].stats[0].level=d;const m=c.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");m&&(m.textContent=`Lv.${d}`);const g=c.button.closest(".spirit-info-item-with-level").querySelector(".level-input");g&&(g.value=d),N()}j()}};e.addEventListener("mouseenter",a),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",r),e.addEventListener("touchstart",d=>{d.preventDefault(),a()},{passive:!1}),e.addEventListener("touchend",d=>{d.preventDefault(),o()},{passive:!1}),l.addEventListener("touchstart",d=>{d.preventDefault(),a()},{passive:!1}),l.addEventListener("touchend",d=>{d.preventDefault()},{passive:!1})}function ze(){c.hintElement&&(document.body.removeChild(c.hintElement),c.hintElement=null),c.bridgeElement&&(document.body.removeChild(c.bridgeElement),c.bridgeElement=null)}function K(n){if(c.timeoutId&&!c.isPressed){clearTimeout(c.timeoutId);const t=b.findIndex(e=>e.name===c.spiritName);if(t!==-1){const e=b[t];e.stats[0].level,c.action==="level-down"&&e.stats[0].level>0?e.stats[0].level=Math.max(0,e.stats[0].level-1):c.action==="level-up"&&e.stats[0].level<25&&(e.stats[0].level=Math.min(25,e.stats[0].level+1));const i=c.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");i&&(i.textContent=`Lv.${e.stats[0].level}`);const l=c.button.closest(".spirit-info-item-with-level").querySelector(".level-input");l&&(l.value=e.stats[0].level),N()}c.timeoutId=null,c.button=null,c.spiritName=null,c.action=null,c.mouseDownTime=null;return}if(c.isPressed){if(n.type==="touchend"&&c.hintElement){const t=c.hintElement.getBoundingClientRect();n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom&&(c.hintHovered=!0)}if(c.hintHovered){const t=c.action==="level-down"?0:25,e=b.findIndex(i=>i.name===c.spiritName);if(e!==-1){b[e].stats[0].level=t;const i=c.button.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");i&&(i.textContent=`Lv.${t}`);const l=c.button.closest(".spirit-info-item-with-level").querySelector(".level-input");l&&(l.value=t),N()}}j()}}function ue(n,t){const e=n.target;if(e.classList.contains("level-btn"))return;if(e.classList.contains("level-input")){const l=e.dataset.spirit;let a=parseInt(e.value,10);(isNaN(a)||a<0)&&(a=0),a>25&&(a=25);const r=b.findIndex(o=>o.name===l);if(r!==-1){b[r].stats[0].level=a;const o=e.closest(".spirit-info-item-with-level").querySelector(".spirit-info-level");o&&(o.textContent=`Lv.${a}`),e.value=a,N()}return}const i=e.closest(".spirit-info-item-with-level");if(i&&!e.closest(".spirit-level-control")){const l=i.dataset.spiritName;L===l?L=null:L=l,document.querySelectorAll(".spirit-info-item-with-level").forEach(a=>{a.classList.remove("selected-used-spirit")}),L&&i.classList.add("selected-used-spirit"),N()}}function Ge(n,t=!1){if(!n||!Array.isArray(n.combination)||n.combination.length===0){alert("ê³„ì‚° ê²°ê³¼ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.");return}const{modal:e,content:i}=Ve();e.style.display="flex",document.body.style.overflow="hidden",L=n.selectedUsedSpirit||null,H=JSON.parse(JSON.stringify(n)),b=JSON.parse(JSON.stringify(n.spirits)),Ze(n,i,t),setTimeout(()=>{try{window.adfit&&typeof window.adfit.render=="function"?document.querySelectorAll("#optimalModalContent .kakao_ad_area").forEach(a=>{window.adfit.render(a)}):D.warn("Kakao AdFit script (window.adfit) not yet loaded or not available.")}catch(l){D.error("Kakao AdFit: Error rendering ads in modal:",l)}},100)}function Ze(n,t,e){const i=I("div","optimal-header",{id:"optimalHeader"}),l=I("div","combination-results-container",{id:"combinationResultsContainer"}),a=b.map(m=>`
      <div class="spirit-info-item-with-level ${L===m.name?"selected-used-spirit":""}" data-spirit-name="${m.name}">
          <div class="spirit-image-container">
              <img src="${m.image}" alt="${m.name}">
          </div>
          <div class="spirit-info-details">
              <div class="spirit-info-name">${m.name}</div>
              <div class="spirit-info-level">Lv.${m.stats[0].level}</div>
          </div>
          ${e?"":w(m.name)?`<div class="spirit-level-control">
                    <div class="fixed-level-control">
                      <span class="fixed-level-label">25 (ê³ ì •)</span>
                    </div>
                  </div>`:`<div class="spirit-level-control">
                    <button class="level-btn minus-btn" data-action="level-down" data-spirit="${m.name}">-</button>
                    <input type="number" class="level-input" min="0" max="25" value="${m.stats[0].level}" data-spirit="${m.name}">
                    <button class="level-btn plus-btn" data-action="level-up" data-spirit="${m.name}">+</button>
                  </div>`}
      </div>`).join("");l.innerHTML=`<div class="spirits-grid-container">${a}</div>`;const r=I("div","results-container");r.innerHTML=`
        <div class="results-section" id="registrationEffectSection" style="display: none;"></div>
        <div class="results-section" id="optimalGradeEffects"></div>
        <div class="results-section" id="optimalFactionEffects"></div>
        <div class="results-section" id="optimalBindEffects"></div>
    `;const o=I("div","spirit-details-container",{id:"optimalSpiritsDetails"}),d=I("div","kakao-ad-modal-container desktop-modal-ad",{});d.innerHTML=`
      <ins class="kakao_ad_area"
          data-ad-unit="DAN-avif2d68afxV6xpn"
          data-ad-width="728"
          data-ad-height="90"></ins>
  `,t.appendChild(d);const f=I("div","kakao-ad-modal-container mobile-modal-ad",{});if(f.innerHTML=`
      <ins class="kakao_ad_area"
          data-ad-unit="DAN-wnVEYOHZjycPISXg"
          data-ad-width="320"
          data-ad-height="50"></ins>
  `,t.appendChild(f),t.append(i),!e){const m=I("div","history-tabs-container",{id:"historyContainer"});t.appendChild(m)}t.append(l,r,o),Re(t),setTimeout(()=>{ee(n,e),e||n.spirits&&n.spirits.length>0&&n.spirits[0].type&&te(n.spirits[0].type)},10)}function ee(n,t){const{gradeScore:e,factionScore:i,gradeEffects:l,factionEffects:a}=n,r=Q(b),o=r.bindScore,d=r.bindStats,f=n.registrationScore||0,m=n.totalScoreWithRegistration||Math.round(y(e)+y(i)+y(o));f>0?`${m.toLocaleString()}${(m-f).toLocaleString()}`:`${m.toLocaleString()}`;let g,p;f>0?(g=`ì¡°í•© í•©ì‚°: ${m.toLocaleString()} (${(m-f).toLocaleString()})`,p="í•©ì‚° = ë“±ë¡ íš¨ê³¼ + ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)"):(g=`ì¡°í•© í•©ì‚°: ${m.toLocaleString()}`,p="í•©ì‚° = ê²°ì† í•©ì‚° (ë“±ê¸‰ íš¨ê³¼ + ì„¸ë ¥ íš¨ê³¼ + ê²°ì† íš¨ê³¼)<br>í”¼í•´ì €í•­ê´€í†µ + í”¼í•´ì €í•­ + (ëŒ€ì¸í”¼í•´% Ã— 10) + (ëŒ€ì¸ë°©ì–´% Ã— 10)"),document.getElementById("optimalHeader").innerHTML=`
        <div class="optimal-header-left">
          <h3 class="modal-main-title">
            ${g}
            <span class="score-formula">${p}</span>
          </h3>
        </div>
        <div class="optimal-header-right">
          ${t?"":'<button id="saveCombinationBtn" class="header-save-button">ì¡°í•© ì €ì¥</button>'}
        </div>
    `;const C=b.map(S=>`
      <div class="spirit-info-item-with-level ${L===S.name?"selected-used-spirit":""}" data-spirit-name="${S.name}">
          <div class="spirit-image-container">
              <img src="${S.image}" alt="${S.name}">
          </div>
          <div class="spirit-info-details">
              <div class="spirit-info-name">${S.name}</div>
              <div class="spirit-info-level">Lv.${S.stats[0].level}</div>
          </div>
          ${t?"":w(S.name)?`<div class="spirit-level-control">
                    <div class="fixed-level-control">
                      <span class="fixed-level-label">25 (ê³ ì •)</span>
                    </div>
                  </div>`:`<div class="spirit-level-control">
                    <button class="level-btn minus-btn" data-action="level-down" data-spirit="${S.name}">-</button>
                    <input type="number" class="level-input" min="0" max="25" value="${S.stats[0].level}" data-spirit="${S.name}">
                    <button class="level-btn plus-btn" data-action="level-up" data-spirit="${S.name}">+</button>
                  </div>`}
      </div>`).join(""),E=document.getElementById("combinationResultsContainer");E.innerHTML=`<div class="spirits-grid-container">${C}</div>`;const T=E.querySelector(".spirits-grid-container");t||(T.addEventListener("click",S=>ue(S)),T.addEventListener("input",S=>ue(S)),T.addEventListener("mousedown",Le),T.addEventListener("touchstart",Ye,{passive:!1}),document.addEventListener("mouseup",K),document.addEventListener("touchend",je));const B=document.getElementById("saveCombinationBtn");B&&!t&&(B.onclick=We),Y("optimalGradeEffects","ë“±ê¸‰ íš¨ê³¼",l||[],e,{gradeCounts:b.reduce((S,x)=>(x.grade&&(S[x.grade]=(S[x.grade]||0)+1),S),{})}),Y("optimalFactionEffects","ì„¸ë ¥ íš¨ê³¼",a||[],i,{factionCounts:b.reduce((S,x)=>(x.influence&&(S[x.influence]=(S[x.influence]||0)+1),S),{})}),Y("optimalBindEffects","ê²°ì† íš¨ê³¼",d,o),Se(),Ce(b,l||[],a||[]),window.toggleMoreStats=ye}function te(n){const t=be(n),e=document.getElementById("historyContainer");if(!e)return;if(t.length===0){e.innerHTML=`<p class="no-history-message">${n} ì¹´í…Œê³ ë¦¬ì— ì €ì¥ëœ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;return}let i=-1,l=null;const a=t.length>0?t[0].id:null;t.forEach(o=>{const d=o.totalScoreWithRegistration||Math.round(y(o.gradeScore)+y(o.factionScore)+y(o.bindScore));d>i&&(i=d,l=o.id)});const r=Array(5).fill(null).map((o,d)=>{const f=t[d];if(!f)return'<div class="history-tab-placeholder"></div>';const m=f.totalScoreWithRegistration||Math.round(y(f.gradeScore)+y(f.factionScore)+y(f.bindScore)),g=Math.round(y(f.gradeScore)+y(f.factionScore)+y(f.bindScore)),p=f.id===a,C=f.id===l,E=f.registrationScore>0?`${m.toLocaleString()}
(${g.toLocaleString()})`:m.toLocaleString();return`<div class="history-tab ${C?"best":""} ${p?"newest active":""}" data-history-id="${f.id}">
            <div class="history-delete-btn" data-category="${n}" data-id="${f.id}" title="ê¸°ë¡ ì‚­ì œ">Ã—</div>
            <div class="tab-indicators">
                ${p?'<span class="current-marker">New</span>':""}
                ${C?'<span class="best-marker">Best</span>':""}
            </div>
            <div class="tab-main-info">
                <span class="tab-score">${E}</span>
                <span class="tab-timestamp">${f.timestamp.substring(5,16)}</span>
            </div>
        </div>`}).join("");e.innerHTML=`<div class="history-tabs">${r}</div>`,e.querySelectorAll(".history-tab").forEach(o=>{o.addEventListener("click",d=>{if(d.target.classList.contains("history-delete-btn")){const g=d.target.dataset.category,p=parseInt(d.target.dataset.id,10);Ue(g,p,d);return}e.querySelectorAll(".history-tab").forEach(g=>g.classList.remove("active")),o.classList.add("active");const f=parseInt(o.dataset.historyId,10),m=t.find(g=>g.id===f);m&&(L=m.selectedUsedSpirit||null,H=JSON.parse(JSON.stringify(m)),b=JSON.parse(JSON.stringify(m.spirits)),ee(m,!1))})})}function Ce(n,t=[],e=[]){n.forEach((p,C)=>{});const i=document.getElementById("optimalSpiritsDetails");if(!i)return;const l=new Set;if(n.forEach(p=>{const C=P.allSpirits.find(B=>B.name===p.name&&B.type===p.type);if(!C)return;const E=p.stats[0].level,T=C.stats.find(B=>B.level===E);T?.bindStat&&Object.keys(T.bindStat).forEach(B=>l.add(B))}),t.forEach(p=>{p.key&&l.add(p.key)}),e.forEach(p=>{p.key&&l.add(p.key)}),l.size===0){i.innerHTML="<h4>ìƒì„¸ ìŠ¤íƒ¯ ë¹„êµ</h4><p>ì„ íƒëœ í™˜ìˆ˜ì˜ ì¥ì°© íš¨ê³¼ ìŠ¤íƒ¯ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";return}const a=["damageResistance","damageResistancePenetration","pvpDamagePercent","pvpDefensePercent"],r=[...l],o=r.filter(p=>a.includes(p)),d=r.filter(p=>!a.includes(p)).sort(),m=[...a.filter(p=>o.includes(p)),...d];let g=`
        <h4>ìƒì„¸ ìŠ¤íƒ¯ ë¹„êµ</h4>
        <div class="table-wrapper">
            <table class="spirits-stats-table">
                <thead>
                    <tr>
                        <th>ëŠ¥ë ¥ì¹˜</th>
                        ${n.map(p=>`<th><img src="${p.image}" class="spirit-thumbnail" alt="${p.name}" title="${p.name}"><br><span class="spirit-table-name">${p.name}</span></th>`).join("")}
                        <th class="stat-total-header">ê²°ì† í•©ì‚°</th>
                        <th class="stat-total-header">ì´ í•©ì‚°</th>
                    </tr>
                </thead>
                <tbody>
    `;m.forEach(p=>{const C=G[p]||"";let E=0,T=0,B=0,S="";const x=[];n.forEach($=>{const Me=P.allSpirits.find(W=>W.name===$.name&&W.type===$.type),oe=$.stats[0].level,Te=Me?.stats.find(W=>W.level===oe),R=y(Te?.bindStat?.[p]||0);E+=R,x.push({name:$.name,level:oe,value:R});const xe=F.includes(p)?`${R}%`:R.toLocaleString();S+=`<td>${R>0?xe:"-"}</td>`});const se=t.find($=>$.key===p);se&&(T=y(se.value||0));const ae=e.find($=>$.key===p);ae&&(B=y(ae.value||0));const O=E+T+B;let _;p==="pvpDamagePercent"||p==="pvpDefensePercent"?_=E>0?`${(E*10).toLocaleString()}`:"-":F.includes(p)?_=`${E.toFixed(2)}%`:_=E.toLocaleString();let V;p==="pvpDamagePercent"||p==="pvpDefensePercent"?V=O>0?`${(O*10).toLocaleString()}`:"-":F.includes(p)?V=`${O.toFixed(2)}%`:V=O.toLocaleString(),g+=`
        <tr class="${C}">
            <th>${X[p]||p}</th>
            ${S}
            <td class="stat-total stat-bind-total">${E>0?_:"-"}</td>
            <td class="stat-total stat-total-sum">${O>0?V:"-"}</td>
        </tr>`}),g+="</tbody></table></div>",i.innerHTML=g}function U(){j(),document.removeEventListener("mouseup",K),q&&(document.removeEventListener("keydown",q._escListener),q.remove(),q=null),L=null,H=null,b=[],delete window.toggleMoreStats,document.body.style.overflow="auto"}let s={isPressed:!1,intervalId:null,timeoutId:null,hintElement:null,bridgeElement:null,hintHovered:!1,button:null,spiritName:null,action:null,mouseDownTime:null,touchStartTime:null,touchMoveHandler:null,ignoreMouseUp:!1};const v={currentCategory:"ìˆ˜í˜¸",selectedSpirits:new Map,groupByInfluence:!1,currentStatFilter:""},h={},u={};function Qe(){return`
    <div class="sub-tabs" id="bondCategoryTabs">
        <div class="tab active" data-category="ìˆ˜í˜¸">ìˆ˜í˜¸</div>
        <div class="tab" data-category="íƒ‘ìŠ¹">íƒ‘ìŠ¹</div>
        <div class="tab" data-category="ë³€ì‹ ">ë³€ì‹ </div>
    </div>

    <div class="view-toggle-container">
        <label class="toggle-switch">
            <input type="checkbox" id="influenceToggle">
            <span class="slider round"></span>
        </label>
        <span class="toggle-label">ì„¸ë ¥ë³„ ë³´ê¸°</span>
        <div class="stat-filter-container"></div>
        <a href="https://open.kakao.com/o/sUSXtUYe" target="_blank" class="kakao-gift-btn">
            <img src="assets/img/gift.png" alt="ì¹´ì¹´ì˜¤ ì„ ë¬¼í•˜ê¸° ì•„ì´ì½˜"
                style="height: 20px; vertical-align: middle; margin-right: 5px;">
            ê°œë°œìì—ê²Œ ì¹´í†¡ ì„ ë¬¼í•˜ê¸°
        </a>
    </div>
    <div class="bond-container">
        <div class="main-content">
            <div class="left-panel">
                <div class="section-header">
                    <h2 class="section-title">ì „ì²´ í™˜ìˆ˜ ëª©ë¡</h2>
                    <div class="selection-controls">
                        <button id="selectAllBtn" class="btn btn-sm btn-primary">ì „ì²´ì„ íƒ</button>
                        <button id="clearAllSelectionBtn" class="btn btn-sm btn-danger">ì „ì²´í•´ì œ</button>
                    </div>
                </div>
                <div id="spiritListContainer" class="spirit-selection"></div>
            </div>
            <div class="right-panel">
                <div class="selected-spirits-container">
                    <div class="selected-spirits-header">
                        <h3 class="selection-title">ì„ íƒëœ í™˜ìˆ˜ (<span id="selectedCount">0</span>)</h3>
                    </div>
                    <div id="selectedSpiritsList" class="selected-spirits"></div>
                    <div class="header-controls">
                        <div class="level-batch-control">
                            <label>ì¼ê´„ ë ˆë²¨:</label>
                            <input type="number" id="batchLevelInput" min="0" max="25" value="0">
                            <button id="applyBatchLevelBtn" class="btn btn-sm btn-primary">ì ìš©</button>
                        </div>
                        <div class="calculate-btn-small">
                            <button id="findOptimalBtn" class="btn btn-warning">ìµœì  ì¡°í•© ì°¾ê¸°</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>`}function M(){ne(),Ke(),k()}function ne(){let n=ie();v.currentStatFilter&&(n=n.filter(t=>Ne(t,v.currentStatFilter))),Ae({container:h.spiritListContainer,spirits:n,onSpiritClick:ot,getSpiritState:t=>{const{hasFullRegistration:e,hasFullBind:i,hasLevel25Bind:l}=Oe(t);return{selected:v.selectedSpirits.has(t.name),registrationCompleted:e,bondCompleted:i,level25BindAvailable:l}},groupByInfluence:v.groupByInfluence})}function ie(){const n=i=>i?parseInt(i.match(/\d+/)?.[0]||"999",10):999,e=(Array.isArray(P.allSpirits)?P.allSpirits:[]).filter(i=>i.type===v.currentCategory);return e.sort((i,l)=>{const a={ì „ì„¤:1,ë¶ˆë©¸:2},r=a[i.grade]||99,o=a[l.grade]||99;return r!==o?r-o:n(i.image)-n(l.image)}),e}function Ke(){const n=h.selectedSpiritsList;n.innerHTML="";const t=[...v.selectedSpirits.values()].filter(l=>l.type===v.currentCategory);h.selectedCount.textContent=t.length;const e=document.getElementById("mobileSelectedCount");e&&(e.textContent=t.length);const i=document.getElementById("selectedSpiritsMobile");if(i&&(i.innerHTML=""),t.length===0){n.innerHTML="<p class='text-center text-sm text-light mt-lg'>ì„ íƒëœ í™˜ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>",i&&(i.innerHTML="<p class='text-center text-sm text-light mt-lg'>ì„ íƒëœ í™˜ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>");return}t.forEach(l=>{const a=I("div","selected-spirit-card");if(a.dataset.spiritName=l.name,a.innerHTML=`
        <button class="remove-spirit" data-action="remove" title="ì„ íƒ í•´ì œ">Ã—</button>
        <div class="selected-spirit-header">
            <img src="${l.image}" alt="${l.name}">
            <div class="spirit-info">
                <div class="spirit-name">${l.name}</div>
            </div>
        </div>
        <div class="spirit-level-control">
            ${w(l.name)?`<div class="fixed-level-control">
                <span class="fixed-level-label">25 (ê³ ì •)</span>
              </div>`:`<button class="level-btn minus-btn" data-action="level-down">-</button>
              <input type="number" class="level-input" min="0" max="25" value="${l.level}">
              <button class="level-btn plus-btn" data-action="level-up">+</button>`}
        </div>
        `,n.appendChild(a),i){const r=I("div","selected-spirit-card");r.dataset.spiritName=l.name,r.innerHTML=a.innerHTML,i.appendChild(r)}})}function k(){localStorage.setItem("bondCalculatorState",JSON.stringify({category:v.currentCategory,spirits:[...v.selectedSpirits.values()],groupByInfluence:v.groupByInfluence,currentStatFilter:v.currentStatFilter}))}function et(){const n=localStorage.getItem("bondCalculatorState");if(n)try{const t=JSON.parse(n);v.currentCategory=t.category||"ìˆ˜í˜¸",v.selectedSpirits=new Map((t.spirits||[]).map(e=>[e.name,e])),v.groupByInfluence=t.groupByInfluence||!1,v.currentStatFilter=t.currentStatFilter||""}catch(t){D.error("Error loading state from storage, resetting:",t),v.selectedSpirits=new Map,v.groupByInfluence=!1,v.currentStatFilter=""}}function tt(){const n=h.container.querySelector(".stat-filter-container"),t=Array.isArray(P.allSpirits)?P.allSpirits:[];De(n,t,l=>{v.currentStatFilter=l,ne()});const e=h.container.querySelector("#statFilter"),i=h.container.querySelector(".clear-filter-btn");e&&(e.value=v.currentStatFilter),i&&(i.style.display=v.currentStatFilter?"inline-flex":"none")}function nt(){const n=document.getElementById("panelToggleContainer"),t=n?n.querySelector(".right-panel"):null;t&&(t.classList.toggle("collapsed"),n.querySelector(".toggle-icon").textContent=t.classList.contains("collapsed")?"â–²":"â–¼")}function it(){le("mobileBatchLevel")}function lt(){Lt("mobileBatchLevel")}function st(){Ie()}function at(){u.containerClickHandler=rt,h.container.addEventListener("click",u.containerClickHandler),u.containerMouseDownHandler=Ee,u.globalMouseUpHandler=He,u.containerTouchStartHandler=ct,u.containerTouchEndHandler=dt,u.globalTouchEndHandler=pt,h.container.addEventListener("mousedown",u.containerMouseDownHandler),h.container.addEventListener("touchstart",u.containerTouchStartHandler,{passive:!1}),h.container.addEventListener("touchend",u.containerTouchEndHandler,{passive:!1}),document.addEventListener("mouseup",u.globalMouseUpHandler),document.addEventListener("touchend",u.globalTouchEndHandler,{passive:!1}),h.container.addEventListener("mouseleave",ft),u.bondCategoryTabsClickHandler=a=>{const o=a.target.closest(".tab");o&&!o.classList.contains("active")&&(h.bondCategoryTabs.querySelector(".tab.active")?.classList.remove("active"),o.classList.add("active"),v.currentCategory=o.dataset.category,M())},h.bondCategoryTabs.addEventListener("click",u.bondCategoryTabsClickHandler),u.influenceToggleChangeHandler=bt,h.influenceToggle.addEventListener("change",u.influenceToggleChangeHandler),u.selectedSpiritsListInputHandler=pe,h.selectedSpiritsList.addEventListener("input",u.selectedSpiritsListInputHandler),u.selectAllClickHandler=yt,h.selectAllBtn.addEventListener("click",u.selectAllClickHandler),u.clearAllSelectionClickHandler=St,h.clearAllSelectionBtn.addEventListener("click",u.clearAllSelectionClickHandler),u.applyBatchLevelClickHandler=()=>le("batchLevelInput"),h.applyBatchLevelBtn.addEventListener("click",u.applyBatchLevelClickHandler),u.findOptimalClickHandler=Ie,h.findOptimalBtn.addEventListener("click",u.findOptimalClickHandler);const n=document.getElementById("panelToggleBtn"),t=document.getElementById("selectedSpiritsMobile"),e=document.getElementById("applyMobileBatchLevelBtn"),i=document.getElementById("setMaxMobileBatchLevelBtn"),l=document.getElementById("findOptimalMobileBtn");n&&(u.panelToggleBtnClickHandler=nt,n.addEventListener("click",u.panelToggleBtnClickHandler)),t&&(u.mobileSelectedSpiritsListInputHandler=pe,t.addEventListener("input",u.mobileSelectedSpiritsListInputHandler),t.addEventListener("touchstart",u.containerTouchStartHandler,{passive:!1}),t.addEventListener("mousedown",u.containerMouseDownHandler)),e&&(u.applyMobileBatchLevelClickHandler=it,e.addEventListener("click",u.applyMobileBatchLevelClickHandler)),i&&(u.setMaxMobileBatchLevelClickHandler=lt,i.addEventListener("click",u.setMaxMobileBatchLevelClickHandler)),l&&(u.findOptimalMobileClickHandler=st,l.addEventListener("click",u.findOptimalMobileClickHandler))}function ot(n){if(!n)return;const t=n.name;if(v.selectedSpirits.has(t))v.selectedSpirits.delete(t);else{const e=w(t)?25:0;v.selectedSpirits.set(t,{...n,level:e})}M()}function rt(n){const t=n.target;if(s.isPressed)return;const e=t.closest(".selected-spirit-card");if(e){const i=e.dataset.spiritName,l=v.selectedSpirits.get(i);if(!l){D.warn("Selected spirit not found in pageState for:",i);return}const a=t.dataset.action;let r=!1;switch(a){case"remove":v.selectedSpirits.delete(i),r=!0;break;case"level-down":if(w(i))break;l.level>0&&(l.level=Math.max(0,l.level-1),r=!0);break;case"level-up":if(w(i))break;l.level<25&&(l.level=Math.min(25,l.level+1),r=!0);break}r&&(k(),M())}s.mouseDownTime=null}function Ee(n){const t=n.target,e=t.closest(".selected-spirit-card");if(!e)return;const i=t.dataset.action;if(i!=="level-down"&&i!=="level-up")return;n.preventDefault(),n.stopPropagation();const l=e.dataset.spiritName;v.selectedSpirits.get(l)&&(s.timeoutId&&clearTimeout(s.timeoutId),s.intervalId&&clearInterval(s.intervalId),s.isPressed=!1,s.button=t,s.spiritName=l,s.action=i,s.hintHovered=!1,s.mouseDownTime=Date.now(),s.timeoutId=setTimeout(()=>{s.button===t&&mt()},300))}function ct(n){const t=n.target;if(!t.closest(".selected-spirit-card"))return;const i=t.classList.contains("level-btn")||t.classList.contains("minus-btn")||t.classList.contains("plus-btn"),l=t.dataset.action;if(!i||l!=="level-down"&&l!=="level-up")return;n.preventDefault(),n.stopPropagation(),s.touchStartTime=Date.now();const a={target:n.target,preventDefault:()=>{},stopPropagation:()=>{}};Ee(a)}function dt(n){if(s.isPressed){const t=n.changedTouches[0];if(s.hintElement){const e=s.hintElement.getBoundingClientRect();if(t.clientX>=e.left&&t.clientX<=e.right&&t.clientY>=e.top&&t.clientY<=e.bottom){s.hintHovered=!0;const l=s.action==="level-down"?0:25,a=v.selectedSpirits.get(s.spiritName);a&&(a.level=l,k(),M())}}A(),n.preventDefault(),n.stopPropagation()}}function ut(n){if(!s.isPressed)return;const t=n.touches[0],e=document.elementFromPoint(t.clientX,t.clientY),i=s.hintElement,l=s.bridgeElement;if(!i)return;const a=e===i||i.contains(e),r=e===l;a?s.hintHovered||(s.hintHovered=!0,i.style.transform="scale(1.2)",i.style.fontSize="12px",i.style.fontWeight="900",i.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)"):s.hintHovered&&!r&&(s.hintHovered=!1,i.style.transform="scale(1)",i.style.fontSize="10px",i.style.fontWeight="bold",i.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)")}function pt(n){if(!s.isPressed&&!s.timeoutId)return;const t=n.changedTouches[0],e=s.touchStartTime?Date.now()-s.touchStartTime:0;if(e>0&&e<300&&!s.isPressed){s.timeoutId&&(clearTimeout(s.timeoutId),s.timeoutId=null);const l=s.spiritName,a=s.action,r=v.selectedSpirits.get(l);if(r&&a&&!w(l)){let o=!1;a==="level-down"&&r.level>0?(r.level=Math.max(0,r.level-1),o=!0):a==="level-up"&&r.level<25&&(r.level=Math.min(25,r.level+1),o=!0),o&&(k(),M())}s.button=null,s.spiritName=null,s.action=null,s.touchStartTime=null;return}if(s.isPressed){if(s.hintElement){const l=s.hintElement.getBoundingClientRect();if(t.clientX>=l.left&&t.clientX<=l.right&&t.clientY>=l.top&&t.clientY<=l.bottom){s.hintHovered=!0;const r=s.action==="level-down"?0:25,o=v.selectedSpirits.get(s.spiritName);o&&(o.level=r,k(),M())}}A(),s.touchMoveHandler&&(document.removeEventListener("touchmove",s.touchMoveHandler),s.touchMoveHandler=null),s.touchStartTime=null;return}if(s.timeoutId){const l={target:document.elementFromPoint(t.clientX,t.clientY),clientX:t.clientX,clientY:t.clientY,type:"touchend"};He(l)}s.touchMoveHandler&&(document.removeEventListener("touchmove",s.touchMoveHandler),s.touchMoveHandler=null),s.touchStartTime=null}function He(n){if(!s.ignoreMouseUp){if(s.timeoutId&&!s.isPressed){clearTimeout(s.timeoutId),s.timeoutId=null,s.button=null,s.spiritName=null,s.action=null;return}if(s.isPressed){if(n.type==="touchend"&&s.hintElement){const t=s.hintElement.getBoundingClientRect();n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom&&(s.hintHovered=!0)}if(s.hintHovered){const t=s.action==="level-down"?0:25,e=v.selectedSpirits.get(s.spiritName);e&&(e.level=t,k(),M())}A()}}}function ft(n){if(s.isPressed){const t=n.relatedTarget===s.hintElement||s.hintElement?.contains(n.relatedTarget),e=n.relatedTarget===s.bridgeElement||s.bridgeElement?.contains(n.relatedTarget);if(t||e)return;A()}}function vt(n,t){const e=h.selectedSpiritsList.querySelector(`[data-spirit-name="${n}"]`);if(e){const l=e.querySelector(".level-input");l&&(l.value=t,l.setAttribute("value",t),l.dispatchEvent(new Event("input",{bubbles:!0})))}const i=document.getElementById("selectedSpiritsMobile");if(i){const l=i.querySelector(`[data-spirit-name="${n}"]`);if(l){const a=l.querySelector(".level-input");a&&(a.value=t,a.setAttribute("value",t),a.dispatchEvent(new Event("input",{bubbles:!0})))}}}function mt(){if(!s.button)return;s.isPressed=!0,s.ignoreMouseUp=!0,setTimeout(()=>{s.ignoreMouseUp=!1},100);try{gt()}catch(t){D.error("createHint ì—ëŸ¬:",t)}const n=()=>{if(!s.isPressed)return!1;const t=v.selectedSpirits.get(s.spiritName);if(!t||w(s.spiritName))return!1;t.level;let e=!1;return s.action==="level-down"&&t.level>0?(t.level=Math.max(0,t.level-1),e=!0):s.action==="level-up"&&t.level<25&&(t.level=Math.min(25,t.level+1),e=!0),e?(k(),vt(s.spiritName,t.level),!0):!1};n(),s.intervalId=setInterval(()=>{n()||A()},200)}function A(){s.intervalId&&(clearInterval(s.intervalId),s.intervalId=null),s.timeoutId&&(clearTimeout(s.timeoutId),s.timeoutId=null),ht(),s.touchMoveHandler&&(document.removeEventListener("touchmove",s.touchMoveHandler),s.touchMoveHandler=null),s.isPressed=!1,s.hintHovered=!1,s.bridgeElement=null,s.button=null,s.spiritName=null,s.action=null,s.mouseDownTime=null,s.touchStartTime=null,s.ignoreMouseUp=!1}function gt(){if(!s.button)return;const t=(s.action==="level-down"?0:25).toString(),e=document.createElement("div");e.className="level-hint",e.textContent=t;const i=s.button.getBoundingClientRect();e.style.position="fixed",e.style.top=i.top+"px",e.style.zIndex="1000",e.style.color="white",e.style.padding="0px 4px",e.style.margin="0",e.style.border="none",e.style.borderRadius="3px",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.pointerEvents="none",e.style.cursor="pointer",e.style.whiteSpace="nowrap",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)",e.style.textAlign="center",e.style.height=i.height+"px",e.style.lineHeight=i.height+"px",e.style.width="32px",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.transition="all 0.2s ease",s.action==="level-down"?(e.style.left=i.left-36+"px",e.style.backgroundColor="#f44336"):(e.style.left=i.right+4+"px",e.style.backgroundColor="#4CAF50"),document.body.appendChild(e),s.hintElement=e,s.hintHovered=!1;const l=document.createElement("div");l.className="hint-bridge",l.style.position="fixed",l.style.top=i.top+"px",l.style.height=i.height+"px",l.style.zIndex="999",l.style.backgroundColor="transparent",l.style.pointerEvents="none",s.action==="level-down"?(l.style.left=i.left-36+"px",l.style.width=36+i.width+4+"px"):(l.style.left=i.left+"px",l.style.width=i.width+4+32+"px"),document.body.appendChild(l),s.bridgeElement=l;const a=()=>{s.isPressed&&(s.hintHovered=!0,e.style.transform="scale(1.2)",e.style.fontSize="12px",e.style.fontWeight="900",e.style.boxShadow="0 2px 6px rgba(0,0,0,0.3)")},r=()=>{s.isPressed&&(s.hintHovered=!1,e.style.transform="scale(1)",e.style.fontSize="10px",e.style.fontWeight="bold",e.style.boxShadow="0 1px 3px rgba(0,0,0,0.2)")},o=()=>{if(D.log("ğŸ¯ íŒíŠ¸ í´ë¦­/í„°ì¹˜ ì¢…ë£Œ",{isPressed:s.isPressed,hintHovered:s.hintHovered}),s.isPressed){if(s.hintHovered){const d=s.action==="level-down"?0:25,f=v.selectedSpirits.get(s.spiritName);f&&(f.level=d,k(),M())}A()}};e.addEventListener("mouseenter",a),e.addEventListener("mouseup",o),e.addEventListener("mouseleave",d=>{!l.contains(d.relatedTarget)&&d.relatedTarget!==l&&r()}),e.addEventListener("touchstart",d=>{d.preventDefault(),d.stopPropagation(),a()},{passive:!1}),e.addEventListener("touchend",d=>{d.preventDefault(),d.stopPropagation(),o()},{passive:!1}),s.touchMoveHandler=ut,document.addEventListener("touchmove",s.touchMoveHandler),l.addEventListener("mouseleave",d=>{!e.contains(d.relatedTarget)&&d.relatedTarget!==e&&r()}),l.addEventListener("touchstart",d=>{d.preventDefault(),d.stopPropagation(),a()},{passive:!1}),l.addEventListener("touchend",d=>{d.preventDefault(),d.stopPropagation()},{passive:!1}),setTimeout(()=>{e&&s.isPressed&&(e.style.pointerEvents="auto"),l&&s.isPressed&&(l.style.pointerEvents="auto")},0)}function ht(){s.hintElement&&(s.hintElement.remove(),s.hintElement=null),s.bridgeElement&&(s.bridgeElement.remove(),s.bridgeElement=null)}function bt(n){v.groupByInfluence=n.target.checked,k(),ne()}function pe(n){if(n.target.matches(".level-input")){const t=n.target.closest(".selected-spirit-card"),e=v.selectedSpirits.get(t.dataset.spiritName);if(e){if(w(t.dataset.spiritName)){n.target.value=25;return}let i=parseInt(n.target.value,10);(isNaN(i)||i<0)&&(i=0),i>25&&(i=25),e.level=i,n.target.value=i,k()}}}function St(){ie().forEach(t=>{v.selectedSpirits.has(t.name)&&v.selectedSpirits.delete(t.name)}),M()}function yt(){ie().forEach(t=>{v.selectedSpirits.has(t.name)||v.selectedSpirits.set(t.name,{...t,level:0})}),M()}function le(n){const t=document.getElementById(n),e=parseInt(t.value,10);if(isNaN(e)||e<0||e>25){alert("0ì—ì„œ 25 ì‚¬ì´ì˜ ë ˆë²¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");return}v.selectedSpirits.forEach(i=>{i.type===v.currentCategory&&(i.level=e)}),M()}function Lt(n){const t=document.getElementById(n);t&&(t.value=25,le(n))}async function Ie(){const n=[...v.selectedSpirits.values()].filter(o=>o.type===v.currentCategory).map(o=>({name:o.name,level:o.level}));if(n.length===0){alert("í˜„ì¬ íƒ­ì—ì„œ ì„ íƒëœ í™˜ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.");return}re("calculate_optimal","Bond Calculator",{num_creatures:n.length,category:v.currentCategory});const t=document.getElementById("app-container"),e=performance.now(),i=n.length;let l="";i>6?l="ìµœì  ì¡°í•© íƒìƒ‰ ì¤‘...":l="ì¡°í•© ê³„ì‚° ì¤‘...",we(t,"ìµœì  ì¡°í•© ê³„ì‚° ì¤‘",l,0,"ì´ˆê¸°í™” ì¤‘...");let a=0;const r=setInterval(()=>{a<90&&(a+=Math.random()*10,i>6?J(a,`ì¡°í•© íƒìƒ‰ ì¤‘... ${Math.round(a)}%`):J(a,`ê³„ì‚° ì¤‘... ${Math.round(a)}%`))},500);try{const o=await ke(n);clearInterval(r),J(100,"ì™„ë£Œ!"),await new Promise(f=>setTimeout(f,300));const d=performance.now()-e;if(ce("bond",d,{num_creatures:i,score:o?.scoreWithBind||0}),!o||!o.spirits)throw new Error("APIì—ì„œ ìœ íš¨í•œ ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.");he(o),Ge(o,!1),re("open_result_modal","Bond Calculator")}catch(o){clearInterval(r);const d=performance.now()-e;ce("bond",d,{num_creatures:i,success:!1}),de.handle(o,"Optimal combination calculation"),alert(de.getUserFriendlyMessage(o.message))}finally{$e()}}function Ct(n){Be(),n.innerHTML=Qe();const t=`
    <button class="panel-toggle-button" id="panelToggleBtn">
        ì„ íƒëœ í™˜ìˆ˜ <span id="mobileSelectedCount">0</span>ê°œ <span class="toggle-icon">â–²</span>
    </button>
    <div class="right-panel collapsed">
        <div class="selected-spirits-container">
            <div class="selected-spirits-header">
                <h3>ì„ íƒëœ í™˜ìˆ˜</h3>
                <div class="header-controls">
                    <div class="level-batch-control">
                        <label>ì¼ê´„ ë ˆë²¨ ì„¤ì •:</label>
                        <input type="number" id="mobileBatchLevel" min="0" max="25" value="0">
                        <button id="applyMobileBatchLevelBtn" class="btn btn-primary apply-level-btn">ì ìš©</button>
                        <button id="setMaxMobileBatchLevelBtn" class="btn btn-warning max-level-btn">Max</button>
                    </div>
                    <div class="calculate-btn-small">
                        <button id="findOptimalMobileBtn" class="btn btn-secondary">ì°¾ê¸°</button>
                    </div>
                </div>
            </div>
            <div id="selectedSpiritsMobile" class="selected-spirits"></div>
        </div>
    </div>`,e=I("div","panel-toggle-container",{id:"panelToggleContainer"});e.innerHTML=t,document.body.appendChild(e);const i=h;i.container=n,i.bondCategoryTabs=n.querySelector("#bondCategoryTabs"),i.spiritListContainer=n.querySelector("#spiritListContainer"),i.selectedSpiritsList=n.querySelector("#selectedSpiritsList"),i.selectedCount=n.querySelector("#selectedCount"),i.selectAllBtn=n.querySelector("#selectAllBtn"),i.clearAllSelectionBtn=n.querySelector("#clearAllSelectionBtn"),i.batchLevelInput=n.querySelector("#batchLevelInput"),i.applyBatchLevelBtn=n.querySelector("#applyBatchLevelBtn"),i.findOptimalBtn=n.querySelector("#findOptimalBtn"),i.influenceToggle=n.querySelector("#influenceToggle"),et(),n.querySelectorAll(".sub-tabs .tab").forEach(l=>{l.classList.toggle("active",l.dataset.category===v.currentCategory)}),h.influenceToggle.checked=v.groupByInfluence,at(),tt(),M()}function Et(){return`
        <div class="content-block">
            <h2>í™˜ìˆ˜ ê²°ì† ê³„ì‚°ê¸° ì‚¬ìš© ì•ˆë‚´</h2>
            <p>í™˜ìˆ˜ ê²°ì† ì‹œìŠ¤í…œì€ 6ë§ˆë¦¬ í™˜ìˆ˜ì˜ ì¡°í•©ì„ í†µí•´ ë‹¤ì–‘í•œ ëŠ¥ë ¥ì¹˜ ì‹œë„ˆì§€ë¥¼ ì–»ëŠ” í•µì‹¬ ì½˜í…ì¸ ì…ë‹ˆë‹¤. 'ë°”ì—°í™”ì—°'ì˜ ê²°ì† ê³„ì‚°ê¸°ëŠ” ì—¬ëŸ¬ë¶„ì´ ë³´ìœ í•œ í™˜ìˆ˜ë“¤ë¡œ ë‹¬ì„±í•  ìˆ˜ ìˆëŠ” ìµœì ì˜ ì¡°í•©ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.</p>
            <p>ì´ ê³„ì‚°ê¸°ëŠ” <strong>í”¼í•´ì €í•­, í”¼í•´ì €í•­ê´€í†µ, ëŒ€ì¸í”¼í•´%*10, ëŒ€ì¸ë°©ì–´%*10</strong>ë¥¼ í•©ì‚°í•œ 'í™˜ì‚° ì ìˆ˜'ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìµœì ì˜ ì¡°í•©ì„ ì°¾ì•„ë‚´ë©°, ìœ ì „ ì•Œê³ ë¦¬ì¦˜ì„ í†µí•´ ìˆ˜ë§ì€ ê²½ìš°ì˜ ìˆ˜ë¥¼ ë¹ ë¥´ê²Œ íƒìƒ‰í•©ë‹ˆë‹¤.</p>

            <h3>ğŸ” í˜ì´ì§€ ê¸°ëŠ¥ ì„¤ëª…</h3>
            <ul>
                <li><strong>ì¹´í…Œê³ ë¦¬ ì„ íƒ:</strong> 'ìˆ˜í˜¸', 'íƒ‘ìŠ¹', 'ë³€ì‹ ' íƒ­ì„ í´ë¦­í•˜ì—¬ í•´ë‹¹ ì¢…ë¥˜ì˜ í™˜ìˆ˜ ëª©ë¡ì„ í™•ì¸í•˜ì„¸ìš”. ê²°ì† ì¡°í•©ì€ ë™ì¼ ì¹´í…Œê³ ë¦¬ ë‚´ì—ì„œë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
                <li><strong>í™˜ìˆ˜ ì„ íƒ:</strong> ì¢Œì¸¡ 'ì „ì²´ í™˜ìˆ˜ ëª©ë¡'ì—ì„œ ê²°ì† ì¡°í•©ì— ì‚¬ìš©í•  í™˜ìˆ˜ë¥¼ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”. ì„ íƒëœ í™˜ìˆ˜ëŠ” ìš°ì¸¡ 'ì„ íƒëœ í™˜ìˆ˜' ëª©ë¡ì— ì¶”ê°€ë©ë‹ˆë‹¤. (ë ˆë²¨ì€ 0ìœ¼ë¡œ ìë™ ì„¤ì •ë©ë‹ˆë‹¤.)</li>
                <li><strong>ì „ì²´ ì„ íƒ/í•´ì œ:</strong> 'í˜„ì¬ íƒ­ ì „ì²´ ì„ íƒ' ë˜ëŠ” 'í˜„ì¬ íƒ­ ì „ì²´ í•´ì œ' ë²„íŠ¼ì„ ì‚¬ìš©í•˜ì—¬ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ì˜ ëª¨ë“  í™˜ìˆ˜ë¥¼ í•œ ë²ˆì— ì„ íƒí•˜ê±°ë‚˜ í•´ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>í™˜ìˆ˜ ë ˆë²¨ ì¡°ì ˆ:</strong> ìš°ì¸¡ ì„ íƒëœ í™˜ìˆ˜ ëª©ë¡ì—ì„œ ê° í™˜ìˆ˜ì˜ ë ˆë²¨ì„ 0~25 ì‚¬ì´ë¡œ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ì¼ê´„ ë ˆë²¨ ì ìš©' ê¸°ëŠ¥ìœ¼ë¡œ ëª¨ë“  í™˜ìˆ˜ì˜ ë ˆë²¨ì„ í•œ ë²ˆì— ë³€ê²½í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ìµœì  ì¡°í•© ì°¾ê¸°:</strong> 'ìµœì  ì¡°í•© ì°¾ê¸°' ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì„ íƒëœ í™˜ìˆ˜ë“¤ ì¤‘ ê°€ì¥ ë†’ì€ í™˜ì‚° ì ìˆ˜ë¥¼ ë‚´ëŠ” 6ë§ˆë¦¬ ì¡°í•©ì„ ì°¾ì•„ ëª¨ë‹¬ ì°½ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.</li>
                <li><strong>ê²°ê³¼ ëª¨ë‹¬ í™•ì¸:</strong>
                    <ul>
                        <li><strong>ì¡°í•© í•©ì‚° ì ìˆ˜:</strong> ëª¨ë‹¬ í—¤ë”ì— 'ì¡°í•© í•©ì‚°: 1234 (123)' í˜•ì‹ìœ¼ë¡œ ì´ì ìˆ˜(ë“±ë¡í¬í•¨)ì™€ ê²°ì†ì ìˆ˜ë¥¼ í•¨ê»˜ í‘œì‹œí•©ë‹ˆë‹¤. ë“±ë¡ íš¨ê³¼ê°€ ì—†ì„ ê²½ìš° 'ì¡°í•© í•©ì‚°: 1234' í˜•ì‹ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</li>
                        <li><strong>ì¡°í•© ì €ì¥ ë²„íŠ¼:</strong> í—¤ë” ìš°ì¸¡ì— ìœ„ì¹˜í•œ 'ì¡°í•© ì €ì¥' ë²„íŠ¼ìœ¼ë¡œ í˜„ì¬ ì¡°í•©ì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                        <li><strong>í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ í™˜ìˆ˜ ì„ íƒ:</strong> ê²°ê³¼ ëª¨ë‹¬ì˜ ì¡°í•© í™˜ìˆ˜ ëª©ë¡ì—ì„œ í˜„ì¬ ê²Œì„ì—ì„œ ì‚¬ìš© ì¤‘ì¸ í™˜ìˆ˜ë¥¼ í´ë¦­í•˜ë©´ ë“±ë¡ íš¨ê³¼ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ í—¤ë” ì ìˆ˜ì— ë°˜ì˜ë©ë‹ˆë‹¤.</li>
                        <li><strong>ë ˆë²¨ ì¡°ì ˆ (ì¥ê¸° ëˆ„ë¥´ê¸°):</strong> ê° í™˜ìˆ˜ì˜ +/- ë²„íŠ¼ì„ ì§§ê²Œ ëˆ„ë¥´ë©´ 1ë ˆë²¨ì”©, ê¸¸ê²Œ ëˆ„ë¥´ë©´ ì—°ì†ìœ¼ë¡œ ë ˆë²¨ì´ ë³€ê²½ë©ë‹ˆë‹¤. ëª¨ë°”ì¼ì—ì„œë„ í„°ì¹˜ë¡œ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ë©°, ì¡°í•© í•©ì‚° ì ìˆ˜ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.</li>
                        <li><strong>ì¡°í•© í™˜ìˆ˜:</strong> ì„ íƒëœ 6ë§ˆë¦¬ í™˜ìˆ˜ì˜ ëª©ë¡ì„ ë³´ì—¬ì£¼ë©°, ê° í™˜ìˆ˜ì˜ ë ˆë²¨ë„ í‘œì‹œë©ë‹ˆë‹¤.</li>
                        <li><strong>íš¨ê³¼ë³„ ìŠ¤íƒ¯:</strong> ë“±ê¸‰, ì„¸ë ¥, ì¥ì°© íš¨ê³¼ë¡œ ì¸í•´ ì¦ê°€í•˜ëŠ” ëŠ¥ë ¥ì¹˜ ëª©ë¡ê³¼ í•©ì‚° ì ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                        <li><strong>ìƒì„¸ ìŠ¤íƒ¯ ë¹„êµ:</strong> ì„ íƒëœ 6ë§ˆë¦¬ í™˜ìˆ˜ ê°ê°ì˜ ìƒì„¸ ì¥ì°© ìŠ¤íƒ¯ê³¼ ì´í•©ì„ ë¹„êµí•˜ì—¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                    </ul>
                </li>
                <li><strong>ê¸°ë¡ íƒ­:</strong> ì´ì „ì— ê³„ì‚°í–ˆë˜ ìµœì  ì¡°í•© ê²°ê³¼ë“¤ì„ ê¸°ë¡ íƒ­ì—ì„œ ë‹¤ì‹œ í™•ì¸í•˜ê³  ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 'ìµœì‹ ', 'ìµœê³ ' ì ìˆ˜ë¥¼ ì‰½ê²Œ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            </ul>

            <h3>ğŸ’¡ ê²°ì† ì‹œìŠ¤í…œ íŒ & ì „ëµ</h3>
            <ul>
                <li><strong>PvEì™€ PvP ì¡°í•©:</strong> ë³´ìŠ¤ ì‚¬ëƒ¥ì„ ìœ„í•œ ì¡°í•©(í”¼í•´ì €í•­ê´€í†µ, ë³´ìŠ¤ëª¬ìŠ¤í„°ì¶”ê°€í”¼í•´)ê³¼ PvPë¥¼ ìœ„í•œ ì¡°í•©(ëŒ€ì¸ë°©ì–´%, í”¼í•´ì €í•´)ì€ ìŠ¤íƒ¯ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ë¦…ë‹ˆë‹¤. ëª©í‘œì— ë§ëŠ” ì¡°í•©ì„ ì°¾ì•„ë³´ì„¸ìš”.</li>
                <li><strong>ë“±ê¸‰ ì‹œë„ˆì§€ vs ì„¸ë ¥ ì‹œë„ˆì§€:</strong> ì „ì„¤/ë¶ˆë©¸ í™˜ìˆ˜ ê°¯ìˆ˜ì— ë”°ë¥¸ ë“±ê¸‰ ì‹œë„ˆì§€ì™€ ê°™ì€ ì„¸ë ¥ í™˜ìˆ˜ ê°¯ìˆ˜ì— ë”°ë¥¸ ì„¸ë ¥ ì‹œë„ˆì§€ì„ ëª¨ë‘ ê³ ë ¤í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ë•Œë¡œëŠ” ë‚®ì€ ë“±ê¸‰ì´ë¼ë„ ì„¸ë ¥ ì‹œë„ˆì§€ë¥¼ ë§ì¶”ëŠ” ê²ƒì´ ë” ìœ ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ì‹¤ì‹œê°„ ë ˆë²¨ ì¡°ì •:</strong> ê²°ê³¼ ëª¨ë‹¬ì—ì„œ ê° í™˜ìˆ˜ì˜ ë ˆë²¨ì„ +/- ë²„íŠ¼ìœ¼ë¡œ ì¡°ì •í•˜ë©´ ì¡°í•© í•©ì‚° ì ìˆ˜ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤. ì¥ê¸° ëˆ„ë¥´ê¸°ë¡œ ë¹ ë¥´ê²Œ ë ˆë²¨ì„ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë©°, ëª¨ë°”ì¼ì—ì„œë„ í„°ì¹˜ë¡œ ë™ì¼í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.</li>
                <li><strong>ê³ ë ˆë²¨ í™˜ìˆ˜ì˜ ì¤‘ìš”ì„±:</strong> ì¥ì°© íš¨ê³¼ëŠ” í™˜ìˆ˜ ë ˆë²¨ì— ë”°ë¼ í¬ê²Œ ì¦ê°€í•˜ë¯€ë¡œ, ì£¼ìš” í™˜ìˆ˜ëŠ” 25ë ˆë²¨ê¹Œì§€ ìœ¡ì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì‹¤ì‹œê°„ ë ˆë²¨ ì¡°ì • ê¸°ëŠ¥ìœ¼ë¡œ ë ˆë²¨ë³„ ì ìˆ˜ ë³€í™”ë¥¼ ì¦‰ì‹œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ëª¨ë“  í™˜ìˆ˜ í™œìš©:</strong> ë‹¨ìˆœíˆ ë³´ìœ  í™˜ìˆ˜ ì¤‘ ê°•í•œ í™˜ìˆ˜ 6ë§ˆë¦¬ë¥¼ ê³ ë¥´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê²°ì† ê³„ì‚°ê¸°ë¥¼ í†µí•´ ì˜ˆìƒì¹˜ ëª»í•œ ì¡°í•©ì´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ë“±ë¡ íš¨ê³¼ í™œìš©:</strong> ê²°ê³¼ ëª¨ë‹¬ì—ì„œ í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ í™˜ìˆ˜ë¥¼ ì„ íƒí•˜ì—¬ ë“±ë¡ íš¨ê³¼ë¥¼ ë°˜ì˜í•˜ë©´ ì‹¤ì œ ê²Œì„ì—ì„œì˜ ì´ ëŠ¥ë ¥ì¹˜ë¥¼ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í—¤ë”ì— 'ì¡°í•© í•©ì‚°: ì´ì  (ê²°ì†ì )' í˜•ì‹ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</li>
                <li><strong>ë¹ ë¥¸ ì¡°í•© ì €ì¥:</strong> í—¤ë” ìš°ì¸¡ì˜ 'ì¡°í•© ì €ì¥' ë²„íŠ¼ìœ¼ë¡œ í˜„ì¬ ì¡°í•©ì„ ê¸°ë¡ íƒ­ì— ì €ì¥í•˜ì—¬ ë‚˜ì¤‘ì— ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            </ul>
        </div>
    `}function Be(){if(h.container){h.bondCategoryTabs&&u.bondCategoryTabsClickHandler&&h.bondCategoryTabs.removeEventListener("click",u.bondCategoryTabsClickHandler),h.container&&u.containerClickHandler&&h.container.removeEventListener("click",u.containerClickHandler),h.influenceToggle&&u.influenceToggleChangeHandler&&h.influenceToggle.removeEventListener("change",u.influenceToggleChangeHandler),h.selectedSpiritsList&&u.selectedSpiritsListInputHandler&&h.selectedSpiritsList.removeEventListener("input",u.selectedSpiritsListInputHandler),h.selectAllBtn&&u.selectAllClickHandler&&h.selectAllBtn.removeEventListener("click",u.selectAllClickHandler),h.clearAllSelectionBtn&&u.clearAllSelectionClickHandler&&h.clearAllSelectionBtn.removeEventListener("click",u.clearAllSelectionClickHandler),h.applyBatchLevelBtn&&u.applyBatchLevelClickHandler&&h.applyBatchLevelBtn.removeEventListener("click",u.applyBatchLevelClickHandler),h.findOptimalBtn&&u.findOptimalClickHandler&&h.findOptimalBtn.removeEventListener("click",u.findOptimalClickHandler);const n=document.getElementById("panelToggleBtn"),t=document.getElementById("selectedSpiritsMobile"),e=document.getElementById("applyMobileBatchLevelBtn"),i=document.getElementById("setMaxMobileBatchLevelBtn"),l=document.getElementById("findOptimalMobileBtn");n&&u.panelToggleBtnClickHandler&&n.removeEventListener("click",u.panelToggleBtnClickHandler),t&&u.mobileSelectedSpiritsListInputHandler&&t.removeEventListener("input",u.mobileSelectedSpiritsListInputHandler),e&&u.applyMobileBatchLevelClickHandler&&e.removeEventListener("click",u.applyMobileBatchLevelClickHandler),i&&u.setMaxMobileBatchLevelClickHandler&&i.removeEventListener("click",u.setMaxMobileBatchLevelClickHandler),l&&u.findOptimalMobileClickHandler&&l.removeEventListener("click",u.findOptimalMobileClickHandler);const a=document.getElementById("panelToggleContainer");a&&a.remove()}}const Mt=Object.freeze(Object.defineProperty({__proto__:null,cleanup:Be,getHelpContentHTML:Et,init:Ct},Symbol.toStringTag,{value:"Module"}));export{Mt as b,Ge as s};
