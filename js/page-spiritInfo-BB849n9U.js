import{s as v}from"./main-1svrCHF-.js";import{i as C,c as u,F as A,S as x,P as q,E as Y,a as V,r as X,d as j,b as z}from"./components-D5VgX-mO.js";import{L as w,a as K}from"./utils-CDZab3B1.js";let I=null,n={isPressed:!1,intervalId:null,timeoutId:null,hintElement:null,bridgeElement:null,hintHovered:!1,button:null,container:null,spiritData:null,currentLevel:0,highlightStat:null,action:null,mouseDownTime:null};function L(e){if(e==null)return 0;const i=parseFloat(String(e).replace(/,/g,""));return isNaN(i)?0:i}function R(e){const i=e.target.closest(".minus-btn, .plus-btn");if(!i)return;e.preventDefault();const t=i.closest(".level-control");if(!t)return;const s=document.getElementById("spirit-info-modal");if(!s)return;const a=t.querySelector(".level-input");if(!a)return;const r=parseInt(a.value)||0,l=v.currentModalSpirit||null,o=v.currentModalHighlightStat||null,p=i.classList.contains("plus-btn")?"increment":"decrement";n.isPressed=!0,n.button=i,n.container=s,n.spiritData=l,n.currentLevel=r,n.highlightStat=o,n.action=p,n.mouseDownTime=Date.now(),n.timeoutId=setTimeout(()=>{n.isPressed&&Q()},300)}function W(e){e.touches[0],R({target:e.target,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()})}function J(e){const i=e.changedTouches[0],t={target:document.elementFromPoint(i.clientX,i.clientY),clientX:i.clientX,clientY:i.clientY,type:"touchend"};P(t)}function Q(){C(n.spiritData.name)||(Z(),n.intervalId=setInterval(()=>{if(!n.isPressed||!n.spiritData)return;let e=n.currentLevel;if(n.action==="increment"?e=Math.min(25,n.currentLevel+1):e=Math.max(0,n.currentLevel-1),e!==n.currentLevel){n.currentLevel=e;const i=n.container.querySelector(".level-input");i&&(i.value=e),k(n.spiritData,e,n.highlightStat)}(e===25||e===0)&&T()},200))}function Z(){if(n.hintElement)return;const i=n.button.getBoundingClientRect(),t=document.createElement("div");t.className="long-press-hint",t.style.position="fixed",t.style.zIndex="2150",t.style.pointerEvents="auto",t.style.padding="4px 10px",t.style.borderRadius="4px",t.style.fontSize="12px",t.style.fontWeight="600",t.style.cursor="pointer",t.style.userSelect="none",t.style.height="24px",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.minWidth="38px",t.style.border="none",t.style.boxShadow="0 2px 6px rgba(0,0,0,0.15)",t.style.transition="all 0.2s ease";const s=n.action==="increment";s?(t.style.left=i.right+8+"px",t.style.top=i.top+(i.height-24)/2+"px",t.innerHTML='<span class="hint-btn max-hint" data-value="25" style="color: white; font-weight: 600; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">MAX</span>',t.style.background="linear-gradient(135deg, #4ecdc4, #44a08d)",t.style.border="1px solid rgba(78, 205, 196, 0.3)",t.style.color="white"):(t.style.left=i.left-46+"px",t.style.top=i.top+(i.height-24)/2+"px",t.innerHTML='<span class="hint-btn min-hint" data-value="0" style="color: white; font-weight: 600; text-shadow: 0 1px 2px rgba(0,0,0,0.1);">MIN</span>',t.style.background="linear-gradient(135deg, #ff6b6b, #ee5a52)",t.style.border="1px solid rgba(255, 107, 107, 0.3)",t.style.color="white"),t.addEventListener("mouseenter",()=>{s?(t.style.background="linear-gradient(135deg, #26d0ce, #2eb398)",t.style.boxShadow="0 3px 6px rgba(68, 160, 141, 0.3)",t.style.transform="translateY(-1px)"):(t.style.background="linear-gradient(135deg, #ff5252, #e53935)",t.style.boxShadow="0 3px 6px rgba(238, 90, 82, 0.3)",t.style.transform="translateY(-1px)")}),t.addEventListener("mouseleave",()=>{s?(t.style.background="linear-gradient(135deg, #4ecdc4, #44a08d)",t.style.boxShadow="0 2px 4px rgba(68, 160, 141, 0.2)",t.style.transform="translateY(0)"):(t.style.background="linear-gradient(135deg, #ff6b6b, #ee5a52)",t.style.boxShadow="0 2px 4px rgba(238, 90, 82, 0.2)",t.style.transform="translateY(0)")}),t.addEventListener("touchstart",l=>{l.preventDefault(),s?(t.style.background="linear-gradient(135deg, #26d0ce, #2eb398)",t.style.boxShadow="0 3px 6px rgba(68, 160, 141, 0.3)",t.style.transform="translateY(-1px)"):(t.style.background="linear-gradient(135deg, #ff5252, #e53935)",t.style.boxShadow="0 3px 6px rgba(238, 90, 82, 0.3)",t.style.transform="translateY(-1px)")},{passive:!1}),t.addEventListener("touchend",l=>{l.preventDefault(),s?(t.style.background="linear-gradient(135deg, #4ecdc4, #44a08d)",t.style.boxShadow="0 2px 4px rgba(68, 160, 141, 0.2)",t.style.transform="translateY(0)"):(t.style.background="linear-gradient(135deg, #ff6b6b, #ee5a52)",t.style.boxShadow="0 2px 4px rgba(238, 90, 82, 0.2)",t.style.transform="translateY(0)")},{passive:!1});const a=document.createElement("div");a.className="hint-bridge",a.style.position="fixed",a.style.zIndex="2149",a.style.pointerEvents="auto",a.style.backgroundColor="transparent",a.style.top=i.top-5+"px",a.style.height=i.height+10+"px",s?(a.style.left=i.right+"px",a.style.width="54px"):(a.style.left=i.left-46+"px",a.style.width="46px");const r=t.querySelector(".hint-btn");r.addEventListener("mouseenter",()=>{n.hintHovered=!0}),r.addEventListener("mouseleave",()=>{n.hintHovered=!1}),r.addEventListener("touchstart",l=>{l.preventDefault(),n.hintHovered=!0},{passive:!1}),r.addEventListener("touchend",l=>{l.preventDefault()},{passive:!1}),a.addEventListener("mouseenter",()=>{n.hintHovered=!0}),a.addEventListener("mouseleave",()=>{n.hintHovered=!1}),a.addEventListener("touchstart",l=>{l.preventDefault(),n.hintHovered=!0},{passive:!1}),a.addEventListener("touchend",l=>{l.preventDefault()},{passive:!1}),document.body.appendChild(t),document.body.appendChild(a),n.hintElement=t,n.bridgeElement=a}function P(e){if(!n.isPressed&&!n.timeoutId)return;const s=Date.now()-n.mouseDownTime<300;if(!n.isPressed&&n.timeoutId){clearTimeout(n.timeoutId),n.timeoutId=null,n.button=null,n.container=null,n.spiritData=null,n.action=null,n.mouseDownTime=null;return}if(e.type==="touchend"&&n.hintElement){const a=n.hintElement.getBoundingClientRect();e.clientX>=a.left&&e.clientX<=a.right&&e.clientY>=a.top&&e.clientY<=a.bottom&&(n.hintHovered=!0)}if(n.hintElement&&n.hintHovered){const a=n.hintElement.querySelector(".hint-btn");if(a){const r=parseInt(a.dataset.value);if(n.spiritData&&!isNaN(r)){const l=n.container.querySelector(".level-input");l&&(l.value=r),k(n.spiritData,r,n.highlightStat)}}T()}else if(s&&!n.hintElement&&n.spiritData){let a=n.currentLevel;if(n.action==="increment"?a=Math.min(25,n.currentLevel+1):a=Math.max(0,n.currentLevel-1),a!==n.currentLevel){const r=n.container.querySelector(".level-input");r&&(r.value=a),k(n.spiritData,a,n.highlightStat)}}T()}function k(e,i,t){C(e.name)&&(i=25);const s=e.stats.find(c=>c.level===i);if(!s)return;const a=s.registrationStat||{},r=s.bindStat||{},l=document.getElementById("registrationList"),o=document.getElementById("registration-sum");l&&o&&B(l,o,a,t);const p=document.getElementById("bindList"),d=document.getElementById("bind-sum");p&&d&&B(p,d,r,t)}function B(e,i,t,s){const a=Object.entries(t),r=e.parentElement;if(a.length===0){r.innerHTML='<p class="no-effects">íš¨ê³¼ ì—†ìŒ</p>',i.textContent="í•©ì‚°: 0";return}let l=0,o="";a.sort((d,c)=>{const m=x[d[0]]||d[0],y=x[c[0]]||c[0];return m.localeCompare(y)}).forEach(([d,c])=>{const m=L(c);if(m<=0)return;const y=x[d]||d,H=q.includes(d)?`${m}%`:m.toLocaleString();let h="";s&&d===s&&(h+=" stat-highlight"),Y.includes(d)&&(h+=" stat-effective",d==="pvpDamagePercent"||d==="pvpDefensePercent"?l+=m*10:l+=m),d==="damageResistance"?h+=" stat-damage-resistance":d==="damageResistancePenetration"?h+=" stat-damage-resistance-penetration":d==="pvpDamagePercent"?h+=" stat-pvp-damage-percent":d==="pvpDefensePercent"&&(h+=" stat-pvp-defense-percent"),o+=`<li class="${h.trim()}"><span class="stat-name">${y}</span><span class="stat-value">${H}</span></li>`}),r.innerHTML=`<ul class="effects-list">${o}</ul>`;const p=r.querySelector(".effects-list");p&&e.id&&(p.id=e.id),i.textContent=`í•©ì‚°: ${l.toLocaleString()}`}function T(){n.timeoutId&&clearTimeout(n.timeoutId),n.intervalId&&clearInterval(n.intervalId),n.hintElement&&n.hintElement.remove(),n.bridgeElement&&n.bridgeElement.remove(),n.isPressed=!1,n.intervalId=null,n.timeoutId=null,n.hintElement=null,n.bridgeElement=null,n.hintHovered=!1,n.button=null,n.container=null,n.spiritData=null,n.currentLevel=0,n.highlightStat=null,n.action=null,n.mouseDownTime=null}function ee(){E();const e=u("div","spirit-modal-overlay",{id:"spirit-info-modal"}),i=u("div","spirit-modal-content");e.appendChild(i),document.body.appendChild(e),e.addEventListener("click",s=>{s.target===e&&E()});const t=s=>{s.key==="Escape"&&E()};return document.addEventListener("keydown",t),e._escListener=t,I=e,{modal:e,content:i}}function te(e,i=null,t=!1){if(!e){w.error("ëª¨ë‹¬ì„ í‘œì‹œí•  í™˜ìˆ˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.");return}const{modal:s,content:a}=ee();document.body.style.overflow="hidden";let r=0;(t||C(e.name))&&(r=25),O(a,e,r,i,t),s.style.display="flex"}function O(e,i,t,s,a){e.innerHTML="",C(i.name)&&(t=25),document._spiritInfoMouseUpAdded||(document.addEventListener("mouseup",P),document._spiritInfoMouseUpAdded=!0),document._spiritInfoTouchEndAdded||(document.addEventListener("touchend",J),document._spiritInfoTouchEndAdded=!0);const r=u("button","modal-close-btn",{text:"âœ•"});r.addEventListener("click",E),e.appendChild(r);const l=u("div","kakao-ad-modal-container desktop-modal-ad");l.innerHTML=`
      <ins class="kakao_ad_area"
          data-ad-unit="DAN-aOM3JPGvOLhHlyoS"
          data-ad-width="728"
          data-ad-height="90"></ins>
  `,e.appendChild(l);const o=u("div","kakao-ad-modal-container mobile-modal-ad");o.innerHTML=`
      <ins class="kakao_ad_area"
          data-ad-unit="DAN-epbkjAaeHSxv0MYl"
          data-ad-width="320"
          data-ad-height="50"></ins>
  `,e.appendChild(o);const p=u("div","spirit-modal-header"),d=u("img","spirit-modal-image",{src:`${i.image}`,alt:i.name});p.appendChild(d);const c=u("div","spirit-modal-title-section"),m=u("h3","",{text:i.name});if(c.appendChild(m),i.influence&&A[i.influence]){const S=u("img","influence-icon",{src:A[i.influence],alt:i.influence,title:i.influence});m.appendChild(S)}const y=a?ne():ie(e,i,t,s);c.appendChild(y),p.appendChild(c),e.appendChild(p);const g=u("div","stats-container"),H=_("ë“±ë¡ íš¨ê³¼","registrationList","registration-sum"),h=_("ê²°ì† íš¨ê³¼","bindList","bind-sum");g.appendChild(H),g.appendChild(h),e.appendChild(g),K(e),ae(i,t,s),setTimeout(()=>{try{if(window.adfit&&typeof window.adfit.render=="function"){const S=l.querySelector(".kakao_ad_area"),D=o.querySelector(".kakao_ad_area");S&&window.adfit.render(S),D&&window.adfit.render(D)}else w.warn("Kakao AdFit script not yet loaded or available for re-rendering.")}catch(S){w.error("Kakao AdFit: Error re-rendering ad after level change:",S)}},100)}function ne(){const e=u("div","level-control"),i=u("div","fixed-level-display");return i.innerHTML="<strong>ë ˆë²¨: 25</strong> (ë­í‚¹ ê¸°ì¤€)",e.appendChild(i),e}function ie(e,i,t,s){const a=u("div","level-control");if(C(i.name)){const d=u("div","fixed-level-control"),c=u("span","fixed-level-label",{text:"25 (ê³ ì •)"});return d.appendChild(c),a.appendChild(d),a}const r=u("div","level-input-container"),l=u("button",["level-btn","minus-btn"],{text:"-"}),o=u("input","level-input",{type:"number",min:"0",max:"25",value:String(t)}),p=u("button",["level-btn","plus-btn"],{text:"+"});return r.append(l,o,p),a.appendChild(r),v.currentModalSpirit=i,v.currentModalHighlightStat=s,r._mousedownHandlerAdded=!0,r.addEventListener("mousedown",R),r.addEventListener("touchstart",W,{passive:!1}),o.addEventListener("change",d=>{let c=parseInt(d.target.value,10);(isNaN(c)||c<0)&&(c=0),c>25&&(c=25),c!==t&&O(e,i,c,s,!1)}),a}function _(e,i,t){const s=u("div","stats-column");return s.innerHTML=`
        <h4>${e} <span id="${t}" class="section-score">í•©ì‚°: 0</span></h4>
        <div class="effects-content">
            <ul id="${i}" class="effects-list"></ul>
        </div>
    `,s}function ae(e,i,t){const s=document.getElementById("registrationList"),a=document.getElementById("bindList");if(!s||!a){w.error("Stat lists not found in DOM.");return}const r=e.stats.find(p=>p.level===i),l=r?.registrationStat||{},o=r?.bindStat||{};F(s,l,t),F(a,o,t),document.getElementById("registration-sum").textContent=`í•©ì‚°: ${N(l)}`,document.getElementById("bind-sum").textContent=`í•©ì‚°: ${N(o)}`}function F(e,i,t){const s=Object.entries(i),a=e.parentElement;if(s.length===0){a.innerHTML='<p class="no-effects">íš¨ê³¼ ì—†ìŒ</p>';return}let r="";s.sort((o,p)=>{const d=x[o[0]]||o[0],c=x[p[0]]||p[0];return d.localeCompare(c)}).forEach(([o,p])=>{const d=L(p);if(d<=0)return;const c=x[o]||o,y=q.includes(o)?`${d}%`:d.toLocaleString();let g="";t&&o===t&&(g+=" stat-highlight"),Y.includes(o)&&(g+=" stat-effective"),o==="damageResistance"?g+=" stat-damage-resistance":o==="damageResistancePenetration"?g+=" stat-damage-resistance-penetration":o==="pvpDamagePercent"?g+=" stat-pvp-damage-percent":o==="pvpDefensePercent"&&(g+=" stat-pvp-defense-percent"),r+=`<li class="${g.trim()}"><span class="stat-name">${c}</span><span class="stat-value">${y}</span></li>`}),a.innerHTML=`<ul class="effects-list">${r}</ul>`;const l=a.querySelector(".effects-list");l&&e.id&&(l.id=e.id)}function N(e){if(!e)return 0;const i=L(e.damageResistance),t=L(e.damageResistancePenetration),s=L(e.pvpDamagePercent),a=L(e.pvpDefensePercent);return Math.round(i+t+s*10+a*10)}function E(){T(),document._spiritInfoMouseUpAdded&&(document.removeEventListener("mouseup",P),document._spiritInfoMouseUpAdded=!1),I&&(document.removeEventListener("keydown",I._escListener),I.remove(),I=null),document.body.style.overflow="auto",v.currentModalSpirit&&delete v.currentModalSpirit,v.currentModalHighlightStat&&delete v.currentModalHighlightStat}const b={currentCategory:"ìˆ˜í˜¸",groupByInfluence:!1,currentStatFilter:""},f={};function se(){return`
    <div class="sub-tabs" id="spiritInfoSubTabs">
        <div class="tab active" data-category="ìˆ˜í˜¸">ìˆ˜í˜¸</div>
        <div class="tab" data-category="íƒ‘ìŠ¹">íƒ‘ìŠ¹</div>
        <div class="tab" data-category="ë³€ì‹ ">ë³€ì‹ </div>
    </div>
    <div class="view-toggle-container">
        <label class="toggle-switch">
            <input type="checkbox" id="influenceToggle">
            <span class="slider round"></span>
        </label>
        <span class="toggle-label">ì„¸ë ¥ë³„ ë³´ê¸°</span>
        <div class="stat-filter-container"></div>
        <a href="https://open.kakao.com/o/sUSXtUYe" target="_blank" class="kakao-gift-btn">
            <img src="assets/img/gift.png" alt="ì¹´ì¹´ì˜¤ ì„ ë¬¼í•˜ê¸° ì•„ì´ì½˜"
                style="height: 20px; vertical-align: middle; margin-right: 5px;">
            ê°œë°œìì—ê²Œ ì¹´í†¡ ì„ ë¬¼í•˜ê¸°
        </a>
    </div>
    <div id="spiritGridContainer"></div>
    `}function $(e){if(!e)return 1/0;const i=e.match(/\d+/);return i?parseInt(i[0],10):1/0}function M(){let e=oe();b.currentStatFilter&&(e=e.filter(i=>z(i,b.currentStatFilter))),X({container:f.spiritGridContainer,spirits:e,onSpiritClick:re,getSpiritState:le,groupByInfluence:b.groupByInfluence})}function re(e){e&&te(e,b.currentStatFilter)}function le(e){const{hasFullRegistration:i,hasFullBind:t,hasLevel25Bind:s}=j(e);return{selected:!1,registrationCompleted:i,bondCompleted:t,level25BindAvailable:s}}function oe(){const e=v.allSpirits.filter(t=>t.type===b.currentCategory),i={ì „ì„¤:1,ë¶ˆë©¸:2};return e.sort((t,s)=>{const a=i[t.grade]||99,r=i[s.grade]||99;return a!==r?a-r:$(t.image)-$(s.image)}),e}function U(e){const i=e.target.closest(".sub-tabs .tab");i&&!i.classList.contains("active")&&(f.subTabs.querySelector(".tab.active").classList.remove("active"),i.classList.add("active"),b.currentCategory=i.dataset.category,M())}function G(e){b.groupByInfluence=e.target.checked,M()}function de(){const e=f.viewToggleContainer.querySelector(".stat-filter-container");V(e,v.allSpirits,i=>{b.currentStatFilter=i,M()})}function ce(e){e.innerHTML=se(),f.container=e,f.subTabs=e.querySelector("#spiritInfoSubTabs"),f.influenceToggle=e.querySelector("#influenceToggle"),f.viewToggleContainer=e.querySelector(".view-toggle-container"),f.spiritGridContainer=e.querySelector("#spiritGridContainer"),f.container.addEventListener("click",U),f.influenceToggle.addEventListener("change",G),de(),M()}function ue(){return`
        <div class="content-block">
            <h2>í™˜ìˆ˜ ì •ë³´ ì‚¬ìš© ì•ˆë‚´</h2>
            <p>í™˜ìˆ˜ë¥¼ í´ë¦­í•˜ì‹œë©´ í•´ë‹¹ í™˜ìˆ˜ì˜ <strong>ì¥ì°© ì •ë³´</strong>ì™€ <strong>ê²°ì† ì •ë³´</strong>ë¥¼ ìƒì„¸íˆ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <p>ë˜í•œ, <strong>í™˜ì‚° í•©ì‚°</strong>ì€ ë‹¤ìŒê³¼ ê°™ì´ ê³„ì‚°ë©ë‹ˆë‹¤: í”¼í•´ì €í•­ + í”¼í•´ì €í•­ê´€í†µ + (ëŒ€ì¸í”¼í•´% * 10) + (ëŒ€ì¸ë°©ì–´% * 10).</p>

            <h3>ğŸ” í˜ì´ì§€ ê¸°ëŠ¥ ì„¤ëª…</h3>
            <ul>
                <li><strong>ì¹´í…Œê³ ë¦¬ ì„ íƒ:</strong> ìƒë‹¨ì˜ 'ìˆ˜í˜¸', 'íƒ‘ìŠ¹', 'ë³€ì‹ ' íƒ­ì„ í´ë¦­í•˜ì—¬ ì›í•˜ëŠ” í™˜ìˆ˜ ì¢…ë¥˜ì˜ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”.</li>
                <li><strong>ì„¸ë ¥ë³„ ë³´ê¸°:</strong> 'ì„¸ë ¥ë³„ ë³´ê¸°' í† ê¸€ì„ ì¼œë©´ í™˜ìˆ˜ë“¤ì„ ì†Œì† ì„¸ë ¥(ê²°ì˜, ê³ ìš” ë“±)ë³„ë¡œ ê·¸ë£¹í™”í•˜ì—¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì„¸ë ¥ ì‹œë„ˆì§€ë¥¼ íŒŒì•…í•˜ëŠ” ë° ìœ ìš©í•©ë‹ˆë‹¤.</li>
                <li><strong>ëŠ¥ë ¥ì¹˜ í•„í„°:</strong> íŠ¹ì • ëŠ¥ë ¥ì¹˜(ì˜ˆ: 'í”¼í•´ì €í•­ê´€í†µ', 'ì¹˜ëª…ìœ„ë ¥%')ë¥¼ ê°€ì§„ í™˜ìˆ˜ë§Œ ë³´ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ì„¸ìš”. ë“œë¡­ë‹¤ìš´ì—ì„œ ì›í•˜ëŠ” ìŠ¤íƒ¯ì„ ì„ íƒí•˜ê±°ë‚˜ ê²€ìƒ‰í•˜ì—¬ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>í™˜ìˆ˜ í´ë¦­:</strong> ëª©ë¡ì—ì„œ ì›í•˜ëŠ” í™˜ìˆ˜ë¥¼ í´ë¦­í•˜ë©´ í•´ë‹¹ í™˜ìˆ˜ì˜ ìƒì„¸ ëŠ¥ë ¥ì¹˜, ë“±ë¡ ë° ì¥ì°© íš¨ê³¼, ê·¸ë¦¬ê³  ë ˆë²¨ë³„ ìŠ¤íƒ¯ ë³€í™”ë¥¼ ëª¨ë‹¬ ì°½ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
            </ul>
        </div>
    `}function pe(){f.container&&f.container.removeEventListener("click",U),f.influenceToggle&&f.influenceToggle.removeEventListener("change",G)}const ve=Object.freeze(Object.defineProperty({__proto__:null,cleanup:pe,getHelpContentHTML:ue,init:ce},Symbol.toStringTag,{value:"Module"}));export{ve as a,te as s};
